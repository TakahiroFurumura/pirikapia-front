import{Q as y}from"./QChip-BY0XlfPP.js";import{Q as w}from"./QSpinnerGears-CUCqmO3q.js";import{Q as x}from"./QBtn-CT6Dl0K4.js";import{Q as b}from"./QPage-DQSgLBWf.js";import{u as q,a as Q}from"./auth-DLqiCEvD.js";import{_ as B}from"./ImageThumbnail.vue_vue_type_script_setup_true_lang-BO06UdZe.js";import{a as C}from"./interfaces-CJZOsaBi.js";import{L as I,r as _,a as N,I as S,M as A,O as p,a0 as L,N as o,X as t,P as s,W as c,Q as i,R as T,S as v,U as k,$ as V,_ as E,Y as P}from"./index-DDJCu69c.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-router-link-CdVA7K5L.js";import"./use-dark-CBgOFpCW.js";import"./QSeparator-DvC_D7Y8.js";import"./QCard-DhPiEgWF.js";import"./use-timeout-DOCYTK08.js";const F={key:0},M={key:1,class:"text-center"},$={class:"raw"},z={key:0},D={key:2},G={key:0,class:"text-negative text-center"},O={key:1,class:"text-center"},U={key:2,class:"row q-col-gutter-xs"},W=I({__name:"ImageBookmarks",setup(X){const u=_([]),l=_(!0),a=_(null),g=q(),m=L(),h=N(()=>typeof m.query.tag=="string"),f=async()=>{console.debug("url query parameters",m.query),l.value=!0,a.value=null;try{await Q.get("/images/bookmark/").then(r=>{const n=r.data;u.value=n.map(d=>C(d))})}catch(r){console.error("Failed to fetch image data:",r),r instanceof Error?a.value=r:a.value=new Error("An unknown error occurred")}finally{l.value=!1}};return S(()=>{f().catch(r=>console.error(r))}),(r,n)=>{const d=V("router-link");return o(),A(b,{class:"q-pa-sm"},{default:p(()=>[h.value?(o(),t("div",F,[i(y,{color:"primary","text-color":"white"},{default:p(()=>[T(v(k(m).query.tag),1)]),_:1})])):s("",!0),l.value?(o(),t("div",M,[i(w,{size:"50px",color:"primary"}),n[0]||(n[0]=c("p",null,"Loading...",-1))])):s("",!0),c("div",$,[i(d,{to:"/user-login"},{default:p(()=>[k(g).isAuthenticated?s("",!0):(o(),t("div",z," Log in to view your bookmark "))]),_:1})]),k(g).isAuthenticated?(o(),t("div",D,[a.value?(o(),t("div",G,[c("p",null,"failed to load images "+v(a.value.message),1),i(x,{label:"reload",color:"primary",onClick:f})])):s("",!0),!l.value&&!a.value&&u.value.length===0?(o(),t("div",O,n[1]||(n[1]=[c("p",null,"No images found",-1)]))):s("",!0),!l.value&&!a.value&&u.value.length>0?(o(),t("div",U,[(o(!0),t(E,null,P(u.value,e=>(o(),t("div",{key:e.filename,class:"col-xs-12 col-sm-6 col-md-4 col-lg-3"},[i(B,{filename:e.filename,image_id:e.image_id,signed_url:e.signed_url,owner_username:e.owner_username,title:e.title,comment_count:e.comment_count,requires_login:e.requires_login,bookmark:e.bookmark,bookmark_count:e.bookmark_count},null,8,["filename","image_id","signed_url","owner_username","title","comment_count","requires_login","bookmark","bookmark_count"])]))),128))])):s("",!0)])):s("",!0)]),_:1})}}}),ie=R(W,[["__scopeId","data-v-c1d9f02a"]]);export{ie as default};
