import{Q as y}from"./QChip-DYjRA0xl.js";import{Q as w}from"./QSpinnerGears-FhtbVfVl.js";import{Q as x}from"./QBtn-Cgmgakfy.js";import{Q as b}from"./QPage-ltYmKs_4.js";import{u as q,a as Q}from"./auth-CDSO7_SK.js";import{_ as B}from"./ImageThumbnail.vue_vue_type_script_setup_true_lang-DJ3E9ctd.js";import{a as C}from"./interfaces-mmqTB_Cm.js";import{I,r as _,a as N,F as S,J as T,L as p,Y as V,K as o,U as t,M as s,T as c,N as i,O as A,P as v,R as k,Q as L,X as E,V as F}from"./index-7caSP31t.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-router-link-DHbFeyIZ.js";import"./use-dark-B3FPmzRe.js";import"./QSeparator-DHJMw6a2.js";import"./QCard-Dgu91nSk.js";import"./use-timeout-CyMzVV9z.js";const R={key:0},M={key:1,class:"text-center"},z={class:"raw"},D={key:0},G={key:2},J={key:0,class:"text-negative text-center"},K={key:1,class:"text-center"},O={key:2,class:"row q-col-gutter-xs"},U=I({__name:"ImageBookmarks",setup(X){const u=_([]),l=_(!0),a=_(null),g=q(),m=V(),h=N(()=>typeof m.query.tag=="string"),f=async()=>{console.debug("url query parameters",m.query),l.value=!0,a.value=null;try{await Q.get("/images/bookmark/").then(r=>{const n=r.data;u.value=n.map(d=>C(d))})}catch(r){console.error("Failed to fetch image data:",r),r instanceof Error?a.value=r:a.value=new Error("An unknown error occurred")}finally{l.value=!1}};return S(()=>{f().catch(r=>console.error(r))}),(r,n)=>{const d=L("router-link");return o(),T(b,{class:"q-pa-sm"},{default:p(()=>[h.value?(o(),t("div",R,[i(y,{color:"primary","text-color":"white"},{default:p(()=>[A(v(k(m).query.tag),1)]),_:1})])):s("",!0),l.value?(o(),t("div",M,[i(w,{size:"50px",color:"primary"}),n[0]||(n[0]=c("p",null,"Loading...",-1))])):s("",!0),c("div",z,[i(d,{to:"/user-login"},{default:p(()=>[k(g).isAuthenticated?s("",!0):(o(),t("div",D," Log in to view your bookmark "))]),_:1})]),k(g).isAuthenticated?(o(),t("div",G,[a.value?(o(),t("div",J,[c("p",null,"failed to load images "+v(a.value.message),1),i(x,{label:"reload",color:"primary",onClick:f})])):s("",!0),!l.value&&!a.value&&u.value.length===0?(o(),t("div",K,n[1]||(n[1]=[c("p",null,"No images found",-1)]))):s("",!0),!l.value&&!a.value&&u.value.length>0?(o(),t("div",O,[(o(!0),t(E,null,F(u.value,e=>(o(),t("div",{key:e.filename,class:"col-xs-12 col-sm-6 col-md-4 col-lg-3"},[i(B,{filename:e.filename,image_id:e.image_id,signed_url:e.signed_url,owner_username:e.owner_username,title:e.title,comment_count:e.comment_count,requires_login:e.requires_login,bookmark:e.bookmark,bookmark_count:e.bookmark_count},null,8,["filename","image_id","signed_url","owner_username","title","comment_count","requires_login","bookmark","bookmark_count"])]))),128))])):s("",!0)])):s("",!0)]),_:1})}}}),ie=P(U,[["__scopeId","data-v-c1d9f02a"]]);export{ie as default};
