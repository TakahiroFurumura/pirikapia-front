import{Q as _}from"./QImg-DUvqEZwI.js";import{Q as x}from"./QList-D6EryW5b.js";import{Q as w}from"./QCardSection-WWTrAP-_.js";import{Q as y}from"./QCard-wl4tDO4D.js";import{a as Q}from"./axios-ByAuK7Yr.js";import{B as D,r,b as k,w as C,O as d,G as o,E as s,M as I,D as f,F as b,L as B,N as n,J as g}from"./index-BZvuEtL5.js";import"./vm-BpWjjgBm.js";import"./use-timeout-7L9xBT-M.js";import"./use-dark-POOZ0Y46.js";const E={class:"q-pa-md q-gutter-sm"},G=D({__name:"ImageDetailView",props:{imageId:{}},setup(p){const v=I(),i=p,t=r(null),c=r(!1),l=r(null),h=async()=>{await Q.get(`images/hashid/${i.imageId}/`).then(e=>{t.value=e.data}).catch(e=>{console.log(e)})},u=async()=>{c.value=!0,l.value=null,t.value=null;try{const e=await h();console.log(e)}catch(e){console.error("画像詳細の取得に失敗しました:",e),e instanceof Error?l.value=e:l.value=new Error(String(e))}finally{c.value=!1}};return k(()=>{u().catch(e=>console.error(e))}),C(()=>i.imageId,(e,a)=>{e!==a&&e&&(console.log(`Image ID changed from ${a} to ${e}. Reloading data.`),u().catch(m=>console.error(m)))}),(e,a)=>(f(),d("div",E,[o(y,{flat:""},{default:s(()=>[o(_,{src:t.value?.signed_url,"spinner-color":"white",style:{"max-width":"1024px"}},{default:s(()=>[t.value?.requires_login?(f(),d("div",{key:0,class:"absolute-full text-subtitle1 flex flex-center",style:{"background-color":"rgba(0, 0, 0, 0.3)",color:"white",padding:"2px"},onClick:a[0]||(a[0]=m=>B(v).push("/user-login"))},a[1]||(a[1]=[n("span",{class:""},"Login to unlock",-1)]))):b("",!0)]),_:1},8,["src"]),o(w,{class:"text-caption"},{default:s(()=>[o(x,{dense:""},{default:s(()=>[n("li",null,g(t.value?.filename),1),n("li",null,g(t.value?.created_on),1)]),_:1})]),_:1})]),_:1})]))}});export{G as default};
