import{Q as _}from"./QImg-Du8I0Ezs.js";import{Q as x}from"./QList-CcBDr4XV.js";import{Q as w}from"./QCardSection-DEVtn_bs.js";import{Q as y}from"./QCard-Dsc5Gk0v.js";import{a as Q}from"./axios-BGOvzz4b.js";import{B as D,r as l,b as k,w as C,O as d,G as o,E as s,M as I,D as f,F as b,L as B,N as n,J as p}from"./index-CoCNUnK8.js";import"./vm-CxRYuall.js";import"./use-timeout-BdjscBeV.js";import"./use-dark-B0TGYslI.js";const E={class:"q-pa-md q-gutter-sm"},G=D({__name:"ImageDetailView",props:{imageId:{}},setup(g){const v=I(),i=g,t=l(null),c=l(!1),r=l(null),h=async()=>{await Q.get(`images/hashid/${i.imageId}/`).then(e=>{t.value=e.data}).catch(e=>{console.log(e)})},u=async()=>{c.value=!0,r.value=null,t.value=null;try{const e=await h();console.log(e)}catch(e){console.error("画像詳細の取得に失敗しました:",e),e instanceof Error?r.value=e:r.value=new Error(String(e))}finally{c.value=!1}};return k(()=>{u().catch(e=>console.error(e))}),C(()=>i.imageId,(e,a)=>{e!==a&&e&&(console.log(`Image ID changed from ${a} to ${e}. Reloading data.`),u().catch(m=>console.error(m)))}),(e,a)=>(f(),d("div",E,[o(y,{flat:""},{default:s(()=>[o(_,{src:t.value?.signed_url,"spinner-color":"white",style:{"max-width":"1024px"}},{default:s(()=>[t.value?.requires_login?(f(),d("div",{key:0,class:"absolute-full text-subtitle1 flex flex-center",style:{cursor:"pointer","background-color":"rgba(0, 0, 0, 0.3)",color:"white",padding:"2px"},onClick:a[0]||(a[0]=m=>B(v).push("/user-login"))},a[1]||(a[1]=[n("span",{class:""},"Login to unlock",-1)]))):b("",!0)]),_:1},8,["src"]),o(w,{class:"text-caption"},{default:s(()=>[o(x,{dense:""},{default:s(()=>[n("li",null,p(t.value?.filename),1),n("li",null,p(t.value?.created_on),1)]),_:1})]),_:1})]),_:1})]))}});export{G as default};
