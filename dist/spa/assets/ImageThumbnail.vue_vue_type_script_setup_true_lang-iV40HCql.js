import{b as B,c as q}from"./interfaces-zAlM4MaG.js";import{Q as C}from"./QSeparator-CHStNmFA.js";import{Q as c}from"./QBtn-CLxMaHe1.js";import{Q as h}from"./QCard-7iG2TEtr.js";import{B as Q,a as n,r as w,x as $,C as N,D as d,E as o,G as t,S,O as T,F as A,N as i,I as f,J as u,M as I}from"./index-BezVK7cR.js";import{u as V,a as D}from"./axios-XIaLQy-R.js";const M={key:0,class:"absolute-bottom text-center",style:{"background-color":"rgba(0, 0, 0, 0.3)",color:"white",padding:"2px"}},z={class:"text-caption q-ml-sm"},O=Q({__name:"ImageThumbnail",props:{filename:{},image_id:{},signed_url:{},owner_username:{},title:{default:""},comment_count:{default:0},requires_login:{type:Boolean},bookmark:{type:Boolean},bookmark_count:{default:0}},setup(k){const p=I(),s=V(),e=k,_=n(()=>e.bookmark_count+(m.value?1:0)),m=w(!1),l=n(()=>e.bookmark!=null?!1:e.bookmark),g=n(()=>l.value||e.bookmark_count>0?"favorite":"favorite_border"),b=n(()=>l.value?"pink":"primary");function v(){return`/image-detail-view/${e.image_id}`}function y(){l.value||(console.debug(`toggleBookmark ${e.filename} ${s.user}`),s.isAuthenticated?D.post(`images/bookmark/${e.image_id}/`,{}).then(a=>{console.debug(`${a.status} ${e.filename} was added to ${s.user.username} bookmark.`),m.value=!0}).catch(a=>{console.error(a.message)}):p.push("/user-login"))}return $(()=>{}),(a,r)=>{const x=S("router-link");return d(),N(h,{flat:"",class:"q-ma-none q-pa-none",style:{cursor:"pointer"}},{default:o(()=>[t(x,{to:v()},{default:o(()=>[t(B,{src:e.signed_url,ratio:1/1,style:{position:"relative"}},{error:o(()=>r[0]||(r[0]=[i("div",{class:"absolute-full flex flex-center bg-grey text-white"}," Failed to load... ",-1)])),default:o(()=>[a.requires_login?(d(),T("div",M,r[1]||(r[1]=[i("span",{class:"text-caption"},"Login to unlock",-1)]))):A("",!0)]),_:1},8,["src"])]),_:1},8,["to"]),t(C),t(q,{align:"left",class:"q-mx-none q-pa-none q-my-none"},{default:o(()=>[t(c,{flat:"",round:"",size:"md",color:b.value,icon:g.value,class:"q-ml-none",onClick:y},{default:o(()=>[f(u(_.value),1)]),_:1},8,["color","icon"]),t(c,{flat:"",round:"",size:"md",color:"primary",icon:"comment",class:"q-ml-sm"},{default:o(()=>[f(u(e.comment_count),1)]),_:1}),i("div",z,"by "+u(e.owner_username),1)]),_:1})]),_:1})}}});export{O as _};
