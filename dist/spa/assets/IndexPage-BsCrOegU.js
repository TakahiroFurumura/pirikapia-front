import{a as y,Q as h,_ as k}from"./interfaces-BlalyuL6.js";import{Q as x}from"./QSpinnerGears-DOT02gPn.js";import{d as q}from"./QBtn-BPYXyJLE.js";import{Q as w}from"./QPage-Lt5zu90k.js";import{a as b}from"./axios-Bu0mZUBt.js";import{B as Q,r as m,a as C,b as B,C as I,U as N,E as g,D as o,O as n,F as i,G as c,I as E,J as _,L as P,N as d,S,Q as T}from"./index-Bq2RqHjR.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-dark-UelJJSP1.js";import"./use-timeout-CHBov73Z.js";import"./QCard-A5L0usJa.js";const F={key:0},L={key:1,class:"text-center"},D={key:2,class:"text-negative text-center"},G={key:3,class:"text-center"},R={key:4,class:"row q-col-gutter-xs"},$=Q({__name:"IndexPage",setup(z){const r=N(),u=m([]),l=m(!0),s=m(null),f=C(()=>typeof r.query.tag=="string"),p=async()=>{console.debug("url query parameters",r.query),l.value=!0,s.value=null;try{let a="";r.query.tag?a=`https://api.pirikapia.com/images/search/?tag=${typeof r.query.tag=="string"?r.query.tag:r.query.tag[0]}`:a="https://api.pirikapia.com/images/random-thumbnails/24/",await b.get(a).then(t=>{const e=t.data;u.value=e.map(v=>y(v))}).catch(t=>{console.log(t)})}catch(a){console.error("Failed to fetch image data:",a),a instanceof Error?s.value=a:s.value=new Error("An unknown error occurred")}finally{l.value=!1}};return B(()=>{p().catch(a=>console.error(a))}),(a,t)=>(o(),I(w,{class:"q-pa-sm"},{default:g(()=>[f.value?(o(),n("div",F,[c(h,{color:"primary","text-color":"white"},{default:g(()=>[E(_(P(r).query.tag),1)]),_:1})])):i("",!0),l.value?(o(),n("div",L,[c(x,{size:"50px",color:"primary"}),t[0]||(t[0]=d("p",null,"Loading...",-1))])):i("",!0),s.value?(o(),n("div",D,[d("p",null,"failed to load images "+_(s.value.message),1),c(q,{label:"reload",color:"primary",onClick:p})])):i("",!0),!l.value&&!s.value&&u.value.length===0?(o(),n("div",G,t[1]||(t[1]=[d("p",null,"No images found",-1)]))):i("",!0),!l.value&&!s.value&&u.value.length>0?(o(),n("div",R,[(o(!0),n(S,null,T(u.value,e=>(o(),n("div",{key:e.filename,class:"col-xs-12 col-sm-6 col-md-4 col-lg-3"},[c(k,{filename:e.filename,image_id:e.image_id,signed_url:e.signed_url,owner_username:e.owner_username,title:e.title,favorite_count:e.favorite_count,comment_count:e.comment_count,requires_login:e.requires_login,bookmark:e.bookmark},null,8,["filename","image_id","signed_url","owner_username","title","favorite_count","comment_count","requires_login","bookmark"])]))),128))])):i("",!0)]),_:1}))}}),Y=V($,[["__scopeId","data-v-b37723d7"]]);export{Y as default};
