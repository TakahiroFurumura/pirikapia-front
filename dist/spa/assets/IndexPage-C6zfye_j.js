import{Q as k}from"./QChip-DYjRA0xl.js";import{Q as y}from"./QSpinnerGears-FhtbVfVl.js";import{Q as h}from"./QBtn-Cgmgakfy.js";import{Q as x}from"./QPage-ltYmKs_4.js";import{a as q}from"./auth-CDSO7_SK.js";import{_ as b}from"./ImageThumbnail.vue_vue_type_script_setup_true_lang-DJ3E9ctd.js";import{a as w}from"./interfaces-mmqTB_Cm.js";import{I as Q,r as m,a as C,F as I,J as N,Y as B,L as p,K as r,U as n,M as u,N as c,O as P,P as _,R as T,T as d,X as V,V as E}from"./index-7caSP31t.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-router-link-DHbFeyIZ.js";import"./use-dark-B3FPmzRe.js";import"./QSeparator-DHJMw6a2.js";import"./QCard-Dgu91nSk.js";import"./use-timeout-CyMzVV9z.js";const L={key:0},R={key:1,class:"text-center"},S={key:2,class:"text-negative text-center"},M={key:3,class:"text-center"},$={key:4,class:"row q-col-gutter-xs"},z=Q({__name:"IndexPage",setup(A){const t=B(),i=m([]),l=m(!0),s=m(null),f=C(()=>typeof t.query.tag=="string"),g=async()=>{console.debug("url query parameters",t.query),l.value=!0,s.value=null;try{let o="";t.query.tag?o=`/images/search/?tag=${typeof t.query.tag=="string"?t.query.tag:t.query.tag[0]}`:o="/images/random-thumbnails/24/",await q.get(o).then(a=>{const e=a.data;i.value=e.map(v=>w(v))}).catch(a=>{console.log(a)})}catch(o){console.error("Failed to fetch image data:",o),o instanceof Error?s.value=o:s.value=new Error("An unknown error occurred")}finally{l.value=!1}};return I(()=>{g().catch(o=>console.error(o))}),(o,a)=>(r(),N(x,{class:"q-pa-sm"},{default:p(()=>[f.value?(r(),n("div",L,[c(k,{color:"primary","text-color":"white"},{default:p(()=>[P(_(T(t).query.tag),1)]),_:1})])):u("",!0),l.value?(r(),n("div",R,[c(y,{size:"50px",color:"primary"}),a[0]||(a[0]=d("p",null,"Loading...",-1))])):u("",!0),s.value?(r(),n("div",S,[d("p",null,"failed to load images "+_(s.value.message),1),c(h,{label:"reload",color:"primary",onClick:g})])):u("",!0),!l.value&&!s.value&&i.value.length===0?(r(),n("div",M,a[1]||(a[1]=[d("p",null,"No images found",-1)]))):u("",!0),!l.value&&!s.value&&i.value.length>0?(r(),n("div",$,[(r(!0),n(V,null,E(i.value,e=>(r(),n("div",{key:e.filename,class:"col-xs-12 col-sm-6 col-md-4 col-lg-3"},[c(b,{filename:e.filename,image_id:e.image_id,signed_url:e.signed_url,owner_username:e.owner_username,title:e.title,comment_count:e.comment_count,requires_login:e.requires_login,bookmark:e.bookmark,bookmark_count:e.bookmark_count},null,8,["filename","image_id","signed_url","owner_username","title","comment_count","requires_login","bookmark","bookmark_count"])]))),128))])):u("",!0)]),_:1}))}}),ae=F(z,[["__scopeId","data-v-9c499ea0"]]);export{ae as default};
