import{Q as it}from"./QBtn-CZIcCi6_.js";import{c as Be,a as c,h as x,g as je,r as T,w as E,d as yl,o as Sl,b as bl,e as pl,f as Ke,n as fe,i as jt,j as wl,k as Cl,p as Qe,l as Pe,s as ye,m as kl,q as ze,t as Vl,u as Se,v as yt,x as St,y as xl,z as rt,A as Re,B as st,C as Je,D as ht,E as ql,F as Kt,G as _l,H as Al,I as Xt,J as Ne,K as Me,L as j,M as et,N as U,O as We,P as Ue,Q as Tt,R as Ae,S as zl,T as ct,U as It,V as Ml,W as Bl,X as Ol}from"./index-DIZdvslo.js";import{h as bt,Q as pt,a as Yt,b as Fl,c as Ht}from"./use-router-link-B_O56vdA.js";import{Q as tt}from"./QItem-fntIFNFg.js";import{Q as Ll,c as El,a as Tl}from"./QMenu-B_MBhpiT.js";import{u as Gt,a as wt,b as Jt,c as Zt,d as Il,e as Hl,f as Dt,g as Dl}from"./use-key-composition-ClTwYej7.js";import{Q as Pl}from"./QChip-CHiRG0CG.js";import{Q as gt}from"./QItemSection-BmH1TppE.js";import{Q as lt}from"./QItemLabel-oB0vjUfs.js";import{Q as Rl,u as $l,a as Ql}from"./QDialog-BBJo7vML.js";import{n as Pt,b as Ze}from"./format-BvkBI9bc.js";import{Q as el,a as Nl,b as Wl}from"./QLayout-CbZR4gqE.js";import{Q as Ul}from"./QList-VusO_x2v.js";import{u as jl,a as Kl,b as Xl}from"./focusout-BjVkqlMj.js";import{u as Yl}from"./use-timeout-CyDOrok_.js";import{u as Gl,a as Jl}from"./use-dark-DQdLCcCG.js";import{u as Zl,a as ea,b as ta,c as la}from"./auth-XbfXqh8a.js";import{u as aa}from"./uiconfig-t9C1pZ6V.js";import"./scroll-DHKrocWs.js";const ua=Be({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:u}){const i=c(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>x("div",{class:i.value},bt(u.default))}}),na=Be({name:"QField",inheritAttrs:!1,props:{...wt,tag:{type:String,default:"label"}},emits:Gt,setup(){return Jt(Zt({tagProp:!0}))}});let at=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const u=document.createElement("div");Object.assign(u.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(u),e.scrollLeft=-1e3,at=e.scrollLeft>=0,e.remove()}const se=1e3,oa=["start","center","end","start-force","center-force","end-force"],tl=Array.prototype.filter,ia=window.getComputedStyle(document.body).overflowAnchor===void 0?jt:function(e,u){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const i=e.children||[];tl.call(i,l=>l.dataset&&l.dataset.qVsAnchor!==void 0).forEach(l=>{delete l.dataset.qVsAnchor});const h=i[u];h?.dataset&&(h.dataset.qVsAnchor="")}))};function He(e,u){return e+u}function dt(e,u,i,h,l,a,g,y){const m=e===window?document.scrollingElement||document.documentElement:e,S=l===!0?"offsetWidth":"offsetHeight",o={scrollStart:0,scrollViewSize:-g-y,scrollMaxSize:0,offsetStart:-g,offsetEnd:-y};if(l===!0?(e===window?(o.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,o.scrollViewSize+=document.documentElement.clientWidth):(o.scrollStart=m.scrollLeft,o.scrollViewSize+=m.clientWidth),o.scrollMaxSize=m.scrollWidth,a===!0&&(o.scrollStart=(at===!0?o.scrollMaxSize-o.scrollViewSize:0)-o.scrollStart)):(e===window?(o.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,o.scrollViewSize+=document.documentElement.clientHeight):(o.scrollStart=m.scrollTop,o.scrollViewSize+=m.clientHeight),o.scrollMaxSize=m.scrollHeight),i!==null)for(let w=i.previousElementSibling;w!==null;w=w.previousElementSibling)w.classList.contains("q-virtual-scroll--skip")===!1&&(o.offsetStart+=w[S]);if(h!==null)for(let w=h.nextElementSibling;w!==null;w=w.nextElementSibling)w.classList.contains("q-virtual-scroll--skip")===!1&&(o.offsetEnd+=w[S]);if(u!==e){const w=m.getBoundingClientRect(),C=u.getBoundingClientRect();l===!0?(o.offsetStart+=C.left-w.left,o.offsetEnd-=C.width):(o.offsetStart+=C.top-w.top,o.offsetEnd-=C.height),e!==window&&(o.offsetStart+=o.scrollStart),o.offsetEnd+=o.scrollMaxSize-o.offsetStart}return o}function Rt(e,u,i,h){u==="end"&&(u=(e===window?document.body:e)[i===!0?"scrollWidth":"scrollHeight"]),e===window?i===!0?(h===!0&&(u=(at===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-u),window.scrollTo(u,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,u):i===!0?(h===!0&&(u=(at===!0?e.scrollWidth-e.offsetWidth:0)-u),e.scrollLeft=u):e.scrollTop=u}function $e(e,u,i,h){if(i>=h)return 0;const l=u.length,a=Math.floor(i/se),g=Math.floor((h-1)/se)+1;let y=e.slice(a,g).reduce(He,0);return i%se!==0&&(y-=u.slice(a*se,i).reduce(He,0)),h%se!==0&&h!==l&&(y-=u.slice(h,g*se).reduce(He,0)),y}const ra={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},$t={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...ra};function sa({virtualScrollLength:e,getVirtualScrollTarget:u,getVirtualScrollEl:i,virtualScrollItemSizeComputed:h}){const l=je(),{props:a,emit:g,proxy:y}=l,{$q:m}=y;let S,o,w,C=[],p;const s=T(0),k=T(0),V=T({}),A=T(null),b=T(null),I=T(null),P=T({from:0,to:0}),q=c(()=>a.tableColspan!==void 0?a.tableColspan:100);h===void 0&&(h=c(()=>a.virtualScrollItemSize));const F=c(()=>h.value+";"+a.virtualScrollHorizontal),ae=c(()=>F.value+";"+a.virtualScrollSliceRatioBefore+";"+a.virtualScrollSliceRatioAfter);E(ae,()=>{J()}),E(F,ve);function ve(){me(o,!0)}function ce(n){me(n===void 0?o:n)}function K(n,d){const _=u();if(_==null||_.nodeType===8)return;const H=dt(_,i(),A.value,b.value,a.virtualScrollHorizontal,m.lang.rtl,a.virtualScrollStickySizeStart,a.virtualScrollStickySizeEnd);w!==H.scrollViewSize&&J(H.scrollViewSize),G(_,H,Math.min(e.value-1,Math.max(0,parseInt(n,10)||0)),0,oa.indexOf(d)!==-1?d:o!==-1&&n>o?"end":"start")}function ie(){const n=u();if(n==null||n.nodeType===8)return;const d=dt(n,i(),A.value,b.value,a.virtualScrollHorizontal,m.lang.rtl,a.virtualScrollStickySizeStart,a.virtualScrollStickySizeEnd),_=e.value-1,H=d.scrollMaxSize-d.offsetStart-d.offsetEnd-k.value;if(S===d.scrollStart)return;if(d.scrollMaxSize<=0){G(n,d,0,0);return}w!==d.scrollViewSize&&J(d.scrollViewSize),ue(P.value.from);const Q=Math.floor(d.scrollMaxSize-Math.max(d.scrollViewSize,d.offsetEnd)-Math.min(p[_],d.scrollViewSize/2));if(Q>0&&Math.ceil(d.scrollStart)>=Q){G(n,d,_,d.scrollMaxSize-d.offsetEnd-C.reduce(He,0));return}let L=0,B=d.scrollStart-d.offsetStart,N=B;if(B<=H&&B+d.scrollViewSize>=s.value)B-=s.value,L=P.value.from,N=B;else for(let z=0;B>=C[z]&&L<_;z++)B-=C[z],L+=se;for(;B>0&&L<_;)B-=p[L],B>-d.scrollViewSize?(L++,N=B):N=p[L]+B;G(n,d,L,N)}function G(n,d,_,H,Q){const L=typeof Q=="string"&&Q.indexOf("-force")!==-1,B=L===!0?Q.replace("-force",""):Q,N=B!==void 0?B:"start";let z=Math.max(0,_-V.value[N]),Z=z+V.value.total;Z>e.value&&(Z=e.value,z=Math.max(0,Z-V.value.total)),S=d.scrollStart;const de=z!==P.value.from||Z!==P.value.to;if(de===!1&&B===void 0){he(_);return}const{activeElement:pe}=document,$=I.value;de===!0&&$!==null&&$!==pe&&$.contains(pe)===!0&&($.addEventListener("focusout",be),setTimeout(()=>{$?.removeEventListener("focusout",be)})),ia($,_-z);const le=B!==void 0?p.slice(z,_).reduce(He,0):0;if(de===!0){const re=Z>=P.value.from&&z<=P.value.to?P.value.to:Z;P.value={from:z,to:re},s.value=$e(C,p,0,z),k.value=$e(C,p,Z,e.value),requestAnimationFrame(()=>{P.value.to!==Z&&S===d.scrollStart&&(P.value={from:P.value.from,to:Z},k.value=$e(C,p,Z,e.value))})}requestAnimationFrame(()=>{if(S!==d.scrollStart)return;de===!0&&ue(z);const re=p.slice(z,_).reduce(He,0),ge=re+d.offsetStart+s.value,Oe=ge+p[_];let we=ge+H;if(B!==void 0){const Ve=re-le,te=d.scrollStart+Ve;we=L!==!0&&te<ge&&Oe<te+d.scrollViewSize?te:B==="end"?Oe-d.scrollViewSize:ge-(B==="start"?0:Math.round((d.scrollViewSize-p[_])/2))}S=we,Rt(n,we,a.virtualScrollHorizontal,m.lang.rtl),he(_)})}function ue(n){const d=I.value;if(d){const _=tl.call(d.children,z=>z.classList&&z.classList.contains("q-virtual-scroll--skip")===!1),H=_.length,Q=a.virtualScrollHorizontal===!0?z=>z.getBoundingClientRect().width:z=>z.offsetHeight;let L=n,B,N;for(let z=0;z<H;){for(B=Q(_[z]),z++;z<H&&_[z].classList.contains("q-virtual-scroll--with-prev")===!0;)B+=Q(_[z]),z++;N=B-p[L],N!==0&&(p[L]+=N,C[Math.floor(L/se)]+=N),L++}}}function be(){I.value?.focus()}function me(n,d){const _=1*h.value;(d===!0||Array.isArray(p)===!1)&&(p=[]);const H=p.length;p.length=e.value;for(let L=e.value-1;L>=H;L--)p[L]=_;const Q=Math.floor((e.value-1)/se);C=[];for(let L=0;L<=Q;L++){let B=0;const N=Math.min((L+1)*se,e.value);for(let z=L*se;z<N;z++)B+=p[z];C.push(B)}o=-1,S=void 0,s.value=$e(C,p,0,P.value.from),k.value=$e(C,p,P.value.to,e.value),n>=0?(ue(P.value.from),fe(()=>{K(n)})):ne()}function J(n){if(n===void 0&&typeof window<"u"){const B=u();B!=null&&B.nodeType!==8&&(n=dt(B,i(),A.value,b.value,a.virtualScrollHorizontal,m.lang.rtl,a.virtualScrollStickySizeStart,a.virtualScrollStickySizeEnd).scrollViewSize)}w=n;const d=parseFloat(a.virtualScrollSliceRatioBefore)||0,_=parseFloat(a.virtualScrollSliceRatioAfter)||0,H=1+d+_,Q=n===void 0||n<=0?1:Math.ceil(n/h.value),L=Math.max(1,Q,Math.ceil((a.virtualScrollSliceSize>0?a.virtualScrollSliceSize:10)/H));V.value={total:Math.ceil(L*H),start:Math.ceil(L*d),center:Math.ceil(L*(.5+d)),end:Math.ceil(L*(1+d)),view:Q}}function Ce(n,d){const _=a.virtualScrollHorizontal===!0?"width":"height",H={["--q-virtual-scroll-item-"+_]:h.value+"px"};return[n==="tbody"?x(n,{class:"q-virtual-scroll__padding",key:"before",ref:A},[x("tr",[x("td",{style:{[_]:`${s.value}px`,...H},colspan:q.value})])]):x(n,{class:"q-virtual-scroll__padding",key:"before",ref:A,style:{[_]:`${s.value}px`,...H}}),x(n,{class:"q-virtual-scroll__content",key:"content",ref:I,tabindex:-1},d.flat()),n==="tbody"?x(n,{class:"q-virtual-scroll__padding",key:"after",ref:b},[x("tr",[x("td",{style:{[_]:`${k.value}px`,...H},colspan:q.value})])]):x(n,{class:"q-virtual-scroll__padding",key:"after",ref:b,style:{[_]:`${k.value}px`,...H}})]}function he(n){o!==n&&(a.onVirtualScroll!==void 0&&g("virtualScroll",{index:n,from:P.value.from,to:P.value.to-1,direction:n<o?"decrease":"increase",ref:y}),o=n)}J();const ne=yl(ie,m.platform.is.ios===!0?120:35);Sl(()=>{J()});let ke=!1;return bl(()=>{ke=!0}),pl(()=>{if(ke!==!0)return;const n=u();S!==void 0&&n!==void 0&&n!==null&&n.nodeType!==8?Rt(n,S,a.virtualScrollHorizontal,m.lang.rtl):K(o)}),Ke(()=>{ne.cancel()}),Object.assign(y,{scrollTo:K,reset:ve,refresh:ce}),{virtualScrollSliceRange:P,virtualScrollSliceSizeComputed:V,setVirtualScrollSize:J,onVirtualScrollEvt:ne,localResetVirtualScroll:me,padVirtualScroll:Ce,scrollTo:K,reset:ve,refresh:ce}}const Qt=e=>["add","add-unique","toggle"].includes(e),ca=".*+?^${}()|[]\\",da=Object.keys(wt);function ft(e,u){if(typeof e=="function")return e;const i=e!==void 0?e:u;return h=>h!==null&&typeof h=="object"&&i in h?h[i]:h}const fa=Be({name:"QSelect",inheritAttrs:!1,props:{...$t,...Il,...wt,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Qt},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:$t.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...Gt,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(e,{slots:u,emit:i}){const{proxy:h}=je(),{$q:l}=h,a=T(!1),g=T(!1),y=T(-1),m=T(""),S=T(!1),o=T(!1);let w=null,C=null,p,s,k,V=null,A,b,I,P;const q=T(null),F=T(null),ae=T(null),ve=T(null),ce=T(null),K=Hl(e),ie=Dl(Bt),G=c(()=>Array.isArray(e.options)?e.options.length:0),ue=c(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:be,virtualScrollSliceSizeComputed:me,localResetVirtualScroll:J,padVirtualScroll:Ce,onVirtualScrollEvt:he,scrollTo:ne,setVirtualScrollSize:ke}=sa({virtualScrollLength:G,getVirtualScrollTarget:ul,getVirtualScrollEl:zt,virtualScrollItemSizeComputed:ue}),n=Zt(),d=c(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,f=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const v=e.mapOptions===!0&&p!==void 0?p:[],O=f.map(R=>al(R,v));return e.modelValue===null&&t===!0?O.filter(R=>R!==null):O}return f}),_=c(()=>{const t={};return da.forEach(f=>{const v=e[f];v!==void 0&&(t[f]=v)}),t}),H=c(()=>e.optionsDark===null?n.isDark.value:e.optionsDark),Q=c(()=>Dt(d.value)),L=c(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||d.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),B=c(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),N=c(()=>G.value===0),z=c(()=>d.value.map(t=>X.value(t)).join(", ")),Z=c(()=>e.displayValue!==void 0?e.displayValue:z.value),de=c(()=>e.optionsHtml===!0?()=>!0:t=>t?.html===!0),pe=c(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||d.value.some(de.value))),$=c(()=>n.focused.value===!0?e.tabindex:-1),le=c(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":a.value===!0?"true":"false","aria-controls":`${n.targetUid.value}_lb`};return y.value>=0&&(t["aria-activedescendant"]=`${n.targetUid.value}_${y.value}`),t}),re=c(()=>({id:`${n.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),ge=c(()=>d.value.map((t,f)=>({index:f,opt:t,html:de.value(t),selected:!0,removeAtIndex:ll,toggleOption:qe,tabindex:$.value}))),Oe=c(()=>{if(G.value===0)return[];const{from:t,to:f}=be.value;return e.options.slice(t,f).map((v,O)=>{const R=r.value(v)===!0,D=ut(v)===!0,Y=t+O,W={clickable:!0,active:D,activeClass:te.value,manualFocus:!0,focused:!1,disable:R,tabindex:-1,dense:e.optionsDense,dark:H.value,role:"option","aria-selected":D===!0?"true":"false",id:`${n.targetUid.value}_${Y}`,onClick:()=>{qe(v)}};return R!==!0&&(y.value===Y&&(W.focused=!0),l.platform.is.desktop===!0&&(W.onMousemove=()=>{a.value===!0&&Fe(Y)})),{index:Y,opt:v,html:de.value(v),label:X.value(v),selected:W.active,focused:W.focused,toggleOption:qe,setOptionIndex:Fe,itemProps:W}})}),we=c(()=>e.dropdownIcon!==void 0?e.dropdownIcon:l.iconSet.arrow.dropdown),Ve=c(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),te=c(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),oe=c(()=>ft(e.optionValue,"value")),X=c(()=>ft(e.optionLabel,"label")),r=c(()=>ft(e.optionDisable,"disable")),M=c(()=>d.value.map(oe.value)),ee=c(()=>{const t={onInput:Bt,onChange:ie,onKeydown:At,onKeyup:qt,onKeypress:_t,onFocus:Vt,onClick(f){s===!0&&ye(f)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=ie,t});E(d,t=>{p=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&n.innerLoading.value!==!0&&(g.value!==!0&&a.value!==!0||Q.value!==!0)&&(k!==!0&&Ie(),(g.value===!0||a.value===!0)&&Le(""))},{immediate:!0}),E(()=>e.fillInput,Ie),E(a,nt),E(G,gl);function xe(t){return e.emitValue===!0?oe.value(t):t}function Xe(t){if(t!==-1&&t<d.value.length)if(e.multiple===!0){const f=e.modelValue.slice();i("remove",{index:t,value:f.splice(t,1)[0]}),i("update:modelValue",f)}else i("update:modelValue",null)}function ll(t){Xe(t),n.focus()}function kt(t,f){const v=xe(t);if(e.multiple!==!0){e.fillInput===!0&&De(X.value(t),!0,!0),i("update:modelValue",v);return}if(d.value.length===0){i("add",{index:0,value:v}),i("update:modelValue",e.multiple===!0?[v]:v);return}if(f===!0&&ut(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const O=e.modelValue.slice();i("add",{index:O.length,value:v}),O.push(v),i("update:modelValue",O)}function qe(t,f){if(n.editable.value!==!0||t===void 0||r.value(t)===!0)return;const v=oe.value(t);if(e.multiple!==!0){f!==!0&&(De(e.fillInput===!0?X.value(t):"",!0,!0),_e()),F.value?.focus(),(d.value.length===0||Pe(oe.value(d.value[0]),v)!==!0)&&i("update:modelValue",e.emitValue===!0?v:t);return}if((s!==!0||S.value===!0)&&n.focus(),Vt(),d.value.length===0){const D=e.emitValue===!0?v:t;i("add",{index:0,value:D}),i("update:modelValue",e.multiple===!0?[D]:D);return}const O=e.modelValue.slice(),R=M.value.findIndex(D=>Pe(D,v));if(R!==-1)i("remove",{index:R,value:O.splice(R,1)[0]});else{if(e.maxValues!==void 0&&O.length>=e.maxValues)return;const D=e.emitValue===!0?v:t;i("add",{index:O.length,value:D}),O.push(D)}i("update:modelValue",O)}function Fe(t){if(l.platform.is.desktop!==!0)return;const f=t!==-1&&t<G.value?t:-1;y.value!==f&&(y.value=f)}function Ye(t=1,f){if(a.value===!0){let v=y.value;do v=Pt(v+t,-1,G.value-1);while(v!==-1&&v!==y.value&&r.value(e.options[v])===!0);y.value!==v&&(Fe(v),ne(v),f!==!0&&e.useInput===!0&&e.fillInput===!0&&Ge(v>=0?X.value(e.options[v]):A,!0))}}function al(t,f){const v=O=>Pe(oe.value(O),t);return e.options.find(v)||f.find(v)||t}function ut(t){const f=oe.value(t);return M.value.find(v=>Pe(v,f))!==void 0}function Vt(t){e.useInput===!0&&F.value!==null&&(t===void 0||F.value===t.target&&t.target.value===z.value)&&F.value.select()}function xt(t){Vl(t,27)===!0&&a.value===!0&&(ye(t),_e(),Ie()),i("keyup",t)}function qt(t){const{value:f}=t.target;if(t.keyCode!==void 0){xt(t);return}if(t.target.value="",w!==null&&(clearTimeout(w),w=null),C!==null&&(clearTimeout(C),C=null),Ie(),typeof f=="string"&&f.length!==0){const v=f.toLocaleLowerCase(),O=D=>{const Y=e.options.find(W=>String(D.value(W)).toLocaleLowerCase()===v);return Y===void 0?!1:(d.value.indexOf(Y)===-1?qe(Y):_e(),!0)},R=D=>{O(oe)!==!0&&D!==!0&&O(X)!==!0&&Le(f,!0,()=>R(!0))};R()}else n.clearValue(t)}function _t(t){i("keypress",t)}function At(t){if(i("keydown",t),kl(t)===!0)return;const f=m.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),v=t.shiftKey!==!0&&e.disableTabSelection!==!0&&e.multiple!==!0&&(y.value!==-1||f===!0);if(t.keyCode===27){Qe(t);return}if(t.keyCode===9&&v===!1){Ee();return}if(t.target===void 0||t.target.id!==n.targetUid.value||n.editable.value!==!0)return;if(t.keyCode===40&&n.innerLoading.value!==!0&&a.value===!1){ze(t),Te();return}if(t.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&m.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?Xe(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&i("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof m.value!="string"||m.value.length===0)&&(ze(t),y.value=-1,Ye(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&me.value!==void 0&&(ze(t),y.value=Math.max(-1,Math.min(G.value,y.value+(t.keyCode===33?-1:1)*me.value.view)),Ye(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(ze(t),Ye(t.keyCode===38?-1:1,e.multiple));const O=G.value;if((I===void 0||P<Date.now())&&(I=""),O>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||I.length!==0)){a.value!==!0&&Te(t);const R=t.key.toLocaleLowerCase(),D=I.length===1&&I[0]===R;P=Date.now()+1500,D===!1&&(ze(t),I+=R);const Y=new RegExp("^"+I.split("").map(ot=>ca.indexOf(ot)!==-1?"\\"+ot:ot).join(".*"),"i");let W=y.value;if(D===!0||W<0||Y.test(X.value(e.options[W]))!==!0)do W=Pt(W+1,-1,O-1);while(W!==y.value&&(r.value(e.options[W])===!0||Y.test(X.value(e.options[W]))!==!0));y.value!==W&&fe(()=>{Fe(W),ne(W),W>=0&&e.useInput===!0&&e.fillInput===!0&&Ge(X.value(e.options[W]),!0)});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||I!=="")&&(t.keyCode!==9||v===!1))){if(t.keyCode!==9&&ze(t),y.value!==-1&&y.value<O){qe(e.options[y.value]);return}if(f===!0){const R=(D,Y)=>{if(Y){if(Qt(Y)!==!0)return}else Y=e.newValueMode;if(De("",e.multiple!==!0,!0),D==null)return;(Y==="toggle"?qe:kt)(D,Y==="add-unique"),e.multiple!==!0&&(F.value?.focus(),_e())};if(e.onNewValue!==void 0?i("newValue",m.value,R):R(m.value),e.multiple!==!0)return}a.value===!0?Ee():n.innerLoading.value!==!0&&Te()}}function zt(){return s===!0?ce.value:ae.value!==null&&ae.value.contentEl!==null?ae.value.contentEl:void 0}function ul(){return zt()}function nl(){return e.hideSelected===!0?[]:u["selected-item"]!==void 0?ge.value.map(t=>u["selected-item"](t)).slice():u.selected!==void 0?[].concat(u.selected()):e.useChips===!0?ge.value.map((t,f)=>x(Pl,{key:"option-"+f,removable:n.editable.value===!0&&r.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:$.value,onRemove(){t.removeAtIndex(f)}},()=>x("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:X.value(t.opt)}))):[x("span",{class:"ellipsis",[pe.value===!0?"innerHTML":"textContent"]:Z.value})]}function Mt(){if(N.value===!0)return u["no-option"]!==void 0?u["no-option"]({inputValue:m.value}):void 0;const t=u.option!==void 0?u.option:v=>x(tt,{key:v.index,...v.itemProps},()=>x(gt,()=>x(lt,()=>x("span",{[v.html===!0?"innerHTML":"textContent"]:v.label}))));let f=Ce("div",Oe.value.map(t));return u["before-options"]!==void 0&&(f=u["before-options"]().concat(f)),Yt(u["after-options"],f)}function ol(t,f){const v=f===!0?{...le.value,...n.splitAttrs.attributes.value}:void 0,O={ref:f===!0?F:void 0,key:"i_t",class:L.value,style:e.inputStyle,value:m.value!==void 0?m.value:"",type:"search",...v,id:f===!0?n.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...ee.value};return t!==!0&&s===!0&&(Array.isArray(O.class)===!0?O.class=[...O.class,"no-pointer-events"]:O.class+=" no-pointer-events"),x("input",O)}function Bt(t){w!==null&&(clearTimeout(w),w=null),C!==null&&(clearTimeout(C),C=null),!(t&&t.target&&t.target.qComposing===!0)&&(Ge(t.target.value||""),k=!0,A=m.value,n.focused.value!==!0&&(s!==!0||S.value===!0)&&n.focus(),e.onFilter!==void 0&&(w=setTimeout(()=>{w=null,Le(m.value)},e.inputDebounce)))}function Ge(t,f){m.value!==t&&(m.value=t,f===!0||e.inputDebounce===0||e.inputDebounce==="0"?i("inputValue",t):C=setTimeout(()=>{C=null,i("inputValue",t)},e.inputDebounce))}function De(t,f,v){k=v!==!0,e.useInput===!0&&(Ge(t,!0),(f===!0||v!==!0)&&(A=t),f!==!0&&Le(t))}function Le(t,f,v){if(e.onFilter===void 0||f!==!0&&n.focused.value!==!0)return;n.innerLoading.value===!0?i("filterAbort"):(n.innerLoading.value=!0,o.value=!0),t!==""&&e.multiple!==!0&&d.value.length!==0&&k!==!0&&t===X.value(d.value[0])&&(t="");const O=setTimeout(()=>{a.value===!0&&(a.value=!1)},10);V!==null&&clearTimeout(V),V=O,i("filter",t,(R,D)=>{(f===!0||n.focused.value===!0)&&V===O&&(clearTimeout(V),typeof R=="function"&&R(),o.value=!1,fe(()=>{n.innerLoading.value=!1,n.editable.value===!0&&(f===!0?a.value===!0&&_e():a.value===!0?nt(!0):a.value=!0),typeof D=="function"&&fe(()=>{D(h)}),typeof v=="function"&&fe(()=>{v(h)})}))},()=>{n.focused.value===!0&&V===O&&(clearTimeout(V),n.innerLoading.value=!1,o.value=!1),a.value===!0&&(a.value=!1)})}function il(){return x(Ll,{ref:ae,class:B.value,style:e.popupContentStyle,modelValue:a.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&N.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:H.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:Ve.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...re.value,onScrollPassive:he,onBeforeShow:Ft,onBeforeHide:rl,onShow:sl},Mt)}function rl(t){Lt(t),Ee()}function sl(){ke()}function cl(t){ye(t),F.value?.focus(),S.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function dl(t){ye(t),fe(()=>{S.value=!1})}function fl(){const t=[x(na,{class:`col-auto ${n.fieldClass.value}`,..._.value,for:n.targetUid.value,dark:H.value,square:!0,loading:o.value,itemAligned:!1,filled:!0,stackLabel:m.value.length!==0,...n.splitAttrs.listeners.value,onFocus:cl,onBlur:dl},{...u,rawControl:()=>n.getControl(!0),before:void 0,after:void 0})];return a.value===!0&&t.push(x("div",{ref:ce,class:B.value+" scroll",style:e.popupContentStyle,...re.value,onClick:Qe,onScrollPassive:he},Mt())),x(Rl,{ref:ve,modelValue:g.value,position:e.useInput===!0?"top":void 0,transitionShow:b,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:Ft,onBeforeHide:vl,onHide:ml,onShow:hl},()=>x("div",{class:"q-select__dialog"+(H.value===!0?" q-select__dialog--dark q-dark":"")+(S.value===!0?" q-select__dialog--focused":"")},t))}function vl(t){Lt(t),ve.value!==null&&ve.value.__updateRefocusTarget(n.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),n.focused.value=!1}function ml(t){_e(),n.focused.value===!1&&i("blur",t),Ie()}function hl(){const t=document.activeElement;(t===null||t.id!==n.targetUid.value)&&F.value!==null&&F.value!==t&&F.value.focus(),ke()}function Ee(){g.value!==!0&&(y.value=-1,a.value===!0&&(a.value=!1),n.focused.value===!1&&(V!==null&&(clearTimeout(V),V=null),n.innerLoading.value===!0&&(i("filterAbort"),n.innerLoading.value=!1,o.value=!1)))}function Te(t){n.editable.value===!0&&(s===!0?(n.onControlFocusin(t),g.value=!0,fe(()=>{n.focus()})):n.focus(),e.onFilter!==void 0?Le(m.value):(N.value!==!0||u["no-option"]!==void 0)&&(a.value=!0))}function _e(){g.value=!1,Ee()}function Ie(){e.useInput===!0&&De(e.multiple!==!0&&e.fillInput===!0&&d.value.length!==0&&X.value(d.value[0])||"",!0,!0)}function nt(t){let f=-1;if(t===!0){if(d.value.length!==0){const v=oe.value(d.value[0]);f=e.options.findIndex(O=>Pe(oe.value(O),v))}J(f)}Fe(f)}function gl(t,f){a.value===!0&&n.innerLoading.value===!1&&(J(-1,!0),fe(()=>{a.value===!0&&n.innerLoading.value===!1&&(t>f?J():nt(!0))}))}function Ot(){g.value===!1&&ae.value!==null&&ae.value.updatePosition()}function Ft(t){t!==void 0&&ye(t),i("popupShow",t),n.hasPopupOpen=!0,n.onControlFocusin(t)}function Lt(t){t!==void 0&&ye(t),i("popupHide",t),n.hasPopupOpen=!1,n.onControlFocusout(t)}function Et(){s=l.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?u["no-option"]!==void 0||e.onFilter!==void 0||N.value===!1:!0),b=l.platform.is.ios===!0&&s===!0&&e.useInput===!0?"fade":e.transitionShow}return wl(Et),Cl(Ot),Et(),Ke(()=>{w!==null&&clearTimeout(w),C!==null&&clearTimeout(C)}),Object.assign(h,{showPopup:Te,hidePopup:_e,removeAtIndex:Xe,add:kt,toggleOption:qe,getOptionIndex:()=>y.value,setOptionIndex:Fe,moveOptionSelection:Ye,filter:Le,updateMenuPosition:Ot,updateInputValue:De,isOptionSelected:ut,getEmittingOptionValue:xe,isOptionDisabled:(...t)=>r.value.apply(null,t)===!0,getOptionValue:(...t)=>oe.value.apply(null,t),getOptionLabel:(...t)=>X.value.apply(null,t)}),Object.assign(n,{innerValue:d,fieldClass:c(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:q,targetRef:F,hasValue:Q,showPopup:Te,floatingLabel:c(()=>e.hideSelected!==!0&&Q.value===!0||typeof m.value=="number"||m.value.length!==0||Dt(e.displayValue)),getControlChild:()=>{if(n.editable.value!==!1&&(g.value===!0||N.value!==!0||u["no-option"]!==void 0))return s===!0?fl():il();n.hasPopupOpen===!0&&(n.hasPopupOpen=!1)},controlEvents:{onFocusin(t){n.onControlFocusin(t)},onFocusout(t){n.onControlFocusout(t,()=>{Ie(),Ee()})},onClick(t){if(Qe(t),s!==!0&&a.value===!0){Ee(),F.value?.focus();return}Te(t)}},getControl:t=>{const f=nl(),v=t===!0||g.value!==!0||s!==!0;if(e.useInput===!0)f.push(ol(t,v));else if(n.editable.value===!0){const R=v===!0?le.value:void 0;f.push(x("input",{ref:v===!0?F:void 0,key:"d_t",class:"q-select__focus-target",id:v===!0?n.targetUid.value:void 0,value:Z.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...R,onKeydown:At,onKeyup:xt,onKeypress:_t})),v===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&f.push(x("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:qt}))}if(K.value!==void 0&&e.disable!==!0&&M.value.length!==0){const R=M.value.map(D=>x("option",{value:D,selected:!0}));f.push(x("select",{class:"hidden",name:K.value,multiple:e.multiple},R))}const O=e.useInput===!0||v!==!0?void 0:n.splitAttrs.attributes.value;return x("div",{class:"q-field__native row items-center",...O,...n.splitAttrs.listeners.value},f)},getInnerAppend:()=>e.loading!==!0&&o.value!==!0&&e.hideDropdownIcon!==!0?[x(pt,{class:"q-select__dropdown-icon"+(a.value===!0?" rotate-180":""),name:we.value})]:null}),Jt(n)}}),va=Be({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:u}){const i=c(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>x("div",{class:i.value,role:"toolbar"},bt(u.default))}}),ma=Be({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:u,emit:i}){const{proxy:{$q:h}}=je(),l=yt(St,Se);if(l===Se)return console.error("QHeader needs to be child of QLayout"),Se;const a=T(parseInt(e.heightHint,10)),g=T(!0),y=c(()=>e.reveal===!0||l.view.value.indexOf("H")!==-1||h.platform.is.ios&&l.isContainer.value===!0),m=c(()=>{if(e.modelValue!==!0)return 0;if(y.value===!0)return g.value===!0?a.value:0;const b=a.value-l.scroll.value.position;return b>0?b:0}),S=c(()=>e.modelValue!==!0||y.value===!0&&g.value!==!0),o=c(()=>e.modelValue===!0&&S.value===!0&&e.reveal===!0),w=c(()=>"q-header q-layout__section--marginal "+(y.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(S.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),C=c(()=>{const b=l.rows.value.top,I={};return b[0]==="l"&&l.left.space===!0&&(I[h.lang.rtl===!0?"right":"left"]=`${l.left.size}px`),b[2]==="r"&&l.right.space===!0&&(I[h.lang.rtl===!0?"left":"right"]=`${l.right.size}px`),I});function p(b,I){l.update("header",b,I)}function s(b,I){b.value!==I&&(b.value=I)}function k({height:b}){s(a,b),p("size",b)}function V(b){o.value===!0&&s(g,!0),i("focusin",b)}E(()=>e.modelValue,b=>{p("space",b),s(g,!0),l.animate()}),E(m,b=>{p("offset",b)}),E(()=>e.reveal,b=>{b===!1&&s(g,e.modelValue)}),E(g,b=>{l.animate(),i("reveal",b)}),E(l.scroll,b=>{e.reveal===!0&&s(g,b.direction==="up"||b.position<=e.revealOffset||b.position-b.inflectionPoint<100)});const A={};return l.instances.header=A,e.modelValue===!0&&p("size",a.value),p("space",e.modelValue),p("offset",m.value),Ke(()=>{l.instances.header===A&&(l.instances.header=void 0,p("size",0),p("offset",0),p("space",!1))}),()=>{const b=Fl(u.default,[]);return e.elevated===!0&&b.push(x("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),b.push(x(el,{debounce:0,onResize:k})),x("header",{class:w.value,style:C.value,onFocusin:V},b)}}}),Ct={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},ha=Object.keys(Ct);Ct.all=!0;function Nt(e){const u={};for(const i of ha)e[i]===!0&&(u[i]=!0);return Object.keys(u).length===0?Ct:(u.horizontal===!0?u.left=u.right=!0:u.left===!0&&u.right===!0&&(u.horizontal=!0),u.vertical===!0?u.up=u.down=!0:u.up===!0&&u.down===!0&&(u.vertical=!0),u.horizontal===!0&&u.vertical===!0&&(u.all=!0),u)}const ga=["INPUT","TEXTAREA"];function Wt(e,u){return u.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof u.handler=="function"&&ga.includes(e.target.nodeName.toUpperCase())===!1&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(u.uid)===-1)}function vt(e,u,i){const h=ht(e);let l,a=h.left-u.event.x,g=h.top-u.event.y,y=Math.abs(a),m=Math.abs(g);const S=u.direction;S.horizontal===!0&&S.vertical!==!0?l=a<0?"left":"right":S.horizontal!==!0&&S.vertical===!0?l=g<0?"up":"down":S.up===!0&&g<0?(l="up",y>m&&(S.left===!0&&a<0?l="left":S.right===!0&&a>0&&(l="right"))):S.down===!0&&g>0?(l="down",y>m&&(S.left===!0&&a<0?l="left":S.right===!0&&a>0&&(l="right"))):S.left===!0&&a<0?(l="left",y<m&&(S.up===!0&&g<0?l="up":S.down===!0&&g>0&&(l="down"))):S.right===!0&&a>0&&(l="right",y<m&&(S.up===!0&&g<0?l="up":S.down===!0&&g>0&&(l="down")));let o=!1;if(l===void 0&&i===!1){if(u.event.isFirst===!0||u.event.lastDir===void 0)return{};l=u.event.lastDir,o=!0,l==="left"||l==="right"?(h.left-=a,y=0,a=0):(h.top-=g,m=0,g=0)}return{synthetic:o,payload:{evt:e,touch:u.event.mouse!==!0,mouse:u.event.mouse===!0,position:h,direction:l,isFirst:u.event.isFirst,isFinal:i===!0,duration:Date.now()-u.event.time,distance:{x:y,y:m},offset:{x:a,y:g},delta:{x:h.left-u.event.lastX,y:h.top-u.event.lastY}}}}let ya=0;const mt=xl({name:"touch-pan",beforeMount(e,{value:u,modifiers:i}){if(i.mouse!==!0&&Re.has.touch!==!0)return;function h(a,g){i.mouse===!0&&g===!0?ze(a):(i.stop===!0&&ye(a),i.prevent===!0&&Qe(a))}const l={uid:"qvtp_"+ya++,handler:u,modifiers:i,direction:Nt(i),noop:jt,mouseStart(a){Wt(a,l)&&ql(a)&&(Je(l,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),l.start(a,!0))},touchStart(a){if(Wt(a,l)){const g=a.target;Je(l,"temp",[[g,"touchmove","move","notPassiveCapture"],[g,"touchcancel","end","passiveCapture"],[g,"touchend","end","passiveCapture"]]),l.start(a)}},start(a,g){if(Re.is.firefox===!0&&st(e,!0),l.lastEvt=a,g===!0||i.stop===!0){if(l.direction.all!==!0&&(g!==!0||l.modifiers.mouseAllDir!==!0&&l.modifiers.mousealldir!==!0)){const S=a.type.indexOf("mouse")!==-1?new MouseEvent(a.type,a):new TouchEvent(a.type,a);a.defaultPrevented===!0&&Qe(S),a.cancelBubble===!0&&ye(S),Object.assign(S,{qKeyEvent:a.qKeyEvent,qClickOutside:a.qClickOutside,qAnchorHandled:a.qAnchorHandled,qClonedBy:a.qClonedBy===void 0?[l.uid]:a.qClonedBy.concat(l.uid)}),l.initialEvent={target:a.target,event:S}}ye(a)}const{left:y,top:m}=ht(a);l.event={x:y,y:m,time:Date.now(),mouse:g===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:y,lastY:m}},move(a){if(l.event===void 0)return;const g=ht(a),y=g.left-l.event.x,m=g.top-l.event.y;if(y===0&&m===0)return;l.lastEvt=a;const S=l.event.mouse===!0,o=()=>{h(a,S);let p;i.preserveCursor!==!0&&i.preservecursor!==!0&&(p=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),S===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),El(),l.styleCleanup=s=>{if(l.styleCleanup=void 0,p!==void 0&&(document.documentElement.style.cursor=p),document.body.classList.remove("non-selectable"),S===!0){const k=()=>{document.body.classList.remove("no-pointer-events--children")};s!==void 0?setTimeout(()=>{k(),s()},50):k()}else s!==void 0&&s()}};if(l.event.detected===!0){l.event.isFirst!==!0&&h(a,l.event.mouse);const{payload:p,synthetic:s}=vt(a,l,!1);p!==void 0&&(l.handler(p)===!1?l.end(a):(l.styleCleanup===void 0&&l.event.isFirst===!0&&o(),l.event.lastX=p.position.left,l.event.lastY=p.position.top,l.event.lastDir=s===!0?void 0:p.direction,l.event.isFirst=!1));return}if(l.direction.all===!0||S===!0&&(l.modifiers.mouseAllDir===!0||l.modifiers.mousealldir===!0)){o(),l.event.detected=!0,l.move(a);return}const w=Math.abs(y),C=Math.abs(m);w!==C&&(l.direction.horizontal===!0&&w>C||l.direction.vertical===!0&&w<C||l.direction.up===!0&&w<C&&m<0||l.direction.down===!0&&w<C&&m>0||l.direction.left===!0&&w>C&&y<0||l.direction.right===!0&&w>C&&y>0?(l.event.detected=!0,l.move(a)):l.end(a,!0))},end(a,g){if(l.event!==void 0){if(rt(l,"temp"),Re.is.firefox===!0&&st(e,!1),g===!0)l.styleCleanup?.(),l.event.detected!==!0&&l.initialEvent!==void 0&&l.initialEvent.target.dispatchEvent(l.initialEvent.event);else if(l.event.detected===!0){l.event.isFirst===!0&&l.handler(vt(a===void 0?l.lastEvt:a,l).payload);const{payload:y}=vt(a===void 0?l.lastEvt:a,l,!0),m=()=>{l.handler(y)};l.styleCleanup!==void 0?l.styleCleanup(m):m()}l.event=void 0,l.initialEvent=void 0,l.lastEvt=void 0}}};if(e.__qtouchpan=l,i.mouse===!0){const a=i.mouseCapture===!0||i.mousecapture===!0?"Capture":"";Je(l,"main",[[e,"mousedown","mouseStart",`passive${a}`]])}Re.has.touch===!0&&Je(l,"main",[[e,"touchstart","touchStart",`passive${i.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,u){const i=e.__qtouchpan;i!==void 0&&(u.oldValue!==u.value&&(typeof value!="function"&&i.end(),i.handler=u.value),i.direction=Nt(u.modifiers))},beforeUnmount(e){const u=e.__qtouchpan;u!==void 0&&(u.event!==void 0&&u.end(),rt(u,"main"),rt(u,"temp"),Re.is.firefox===!0&&st(e,!1),u.styleCleanup?.(),delete e.__qtouchpan)}}),Ut=150,Sa=Be({name:"QDrawer",inheritAttrs:!1,props:{...Kl,...Gl,side:{type:String,default:"left",validator:e=>["left","right"].includes(e)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:e=>["default","desktop","mobile"].includes(e),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...jl,"onLayout","miniState"],setup(e,{slots:u,emit:i,attrs:h}){const l=je(),{proxy:{$q:a}}=l,g=Jl(e,a),{preventBodyScroll:y}=Ql(),{registerTimeout:m,removeTimeout:S}=Yl(),o=yt(St,Se);if(o===Se)return console.error("QDrawer needs to be child of QLayout"),Se;let w,C=null,p;const s=T(e.behavior==="mobile"||e.behavior!=="desktop"&&o.totalWidth.value<=e.breakpoint),k=c(()=>e.mini===!0&&s.value!==!0),V=c(()=>k.value===!0?e.miniWidth:e.width),A=T(e.showIfAbove===!0&&s.value===!1?!0:e.modelValue===!0),b=c(()=>e.persistent!==!0&&(s.value===!0||ke.value===!0));function I(r,M){if(ae(),r!==!1&&o.animate(),$(0),s.value===!0){const ee=o.instances[J.value];ee?.belowBreakpoint===!0&&ee.hide(!1),le(1),o.isContainer.value!==!0&&y(!0)}else le(0),r!==!1&&re(!1);m(()=>{r!==!1&&re(!0),M!==!0&&i("show",r)},Ut)}function P(r,M){ve(),r!==!1&&o.animate(),le(0),$(ie.value*V.value),Ve(),M!==!0?m(()=>{i("hide",r)},Ut):S()}const{show:q,hide:F}=Xl({showing:A,hideOnRouteChange:b,handleShow:I,handleHide:P}),{addToHistory:ae,removeFromHistory:ve}=$l(A,F,b),ce={belowBreakpoint:s,hide:F},K=c(()=>e.side==="right"),ie=c(()=>(a.lang.rtl===!0?-1:1)*(K.value===!0?1:-1)),G=T(0),ue=T(!1),be=T(!1),me=T(V.value*ie.value),J=c(()=>K.value===!0?"left":"right"),Ce=c(()=>A.value===!0&&s.value===!1&&e.overlay===!1?e.miniToOverlay===!0?e.miniWidth:V.value:0),he=c(()=>e.overlay===!0||e.miniToOverlay===!0||o.view.value.indexOf(K.value?"R":"L")!==-1||a.platform.is.ios===!0&&o.isContainer.value===!0),ne=c(()=>e.overlay===!1&&A.value===!0&&s.value===!1),ke=c(()=>e.overlay===!0&&A.value===!0&&s.value===!1),n=c(()=>"fullscreen q-drawer__backdrop"+(A.value===!1&&ue.value===!1?" hidden":"")),d=c(()=>({backgroundColor:`rgba(0,0,0,${G.value*.4})`})),_=c(()=>K.value===!0?o.rows.value.top[2]==="r":o.rows.value.top[0]==="l"),H=c(()=>K.value===!0?o.rows.value.bottom[2]==="r":o.rows.value.bottom[0]==="l"),Q=c(()=>{const r={};return o.header.space===!0&&_.value===!1&&(he.value===!0?r.top=`${o.header.offset}px`:o.header.space===!0&&(r.top=`${o.header.size}px`)),o.footer.space===!0&&H.value===!1&&(he.value===!0?r.bottom=`${o.footer.offset}px`:o.footer.space===!0&&(r.bottom=`${o.footer.size}px`)),r}),L=c(()=>{const r={width:`${V.value}px`,transform:`translateX(${me.value}px)`};return s.value===!0?r:Object.assign(r,Q.value)}),B=c(()=>"q-drawer__content fit "+(o.isContainer.value!==!0?"scroll":"overflow-auto")),N=c(()=>`q-drawer q-drawer--${e.side}`+(be.value===!0?" q-drawer--mini-animate":"")+(e.bordered===!0?" q-drawer--bordered":"")+(g.value===!0?" q-drawer--dark q-dark":"")+(ue.value===!0?" no-transition":A.value===!0?"":" q-layout--prevent-focus")+(s.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${k.value===!0?"mini":"standard"}`+(he.value===!0||ne.value!==!0?" fixed":"")+(e.overlay===!0||e.miniToOverlay===!0?" q-drawer--on-top":"")+(_.value===!0?" q-drawer--top-padding":""))),z=c(()=>{const r=a.lang.rtl===!0?e.side:J.value;return[[mt,Oe,void 0,{[r]:!0,mouse:!0}]]}),Z=c(()=>{const r=a.lang.rtl===!0?J.value:e.side;return[[mt,we,void 0,{[r]:!0,mouse:!0}]]}),de=c(()=>{const r=a.lang.rtl===!0?J.value:e.side;return[[mt,we,void 0,{[r]:!0,mouse:!0,mouseAllDir:!0}]]});function pe(){oe(s,e.behavior==="mobile"||e.behavior!=="desktop"&&o.totalWidth.value<=e.breakpoint)}E(s,r=>{r===!0?(w=A.value,A.value===!0&&F(!1)):e.overlay===!1&&e.behavior!=="mobile"&&w!==!1&&(A.value===!0?($(0),le(0),Ve()):q(!1))}),E(()=>e.side,(r,M)=>{o.instances[M]===ce&&(o.instances[M]=void 0,o[M].space=!1,o[M].offset=0),o.instances[r]=ce,o[r].size=V.value,o[r].space=ne.value,o[r].offset=Ce.value}),E(o.totalWidth,()=>{(o.isContainer.value===!0||document.qScrollPrevented!==!0)&&pe()}),E(()=>e.behavior+e.breakpoint,pe),E(o.isContainer,r=>{A.value===!0&&y(r!==!0),r===!0&&pe()}),E(o.scrollbarWidth,()=>{$(A.value===!0?0:void 0)}),E(Ce,r=>{te("offset",r)}),E(ne,r=>{i("onLayout",r),te("space",r)}),E(K,()=>{$()}),E(V,r=>{$(),X(e.miniToOverlay,r)}),E(()=>e.miniToOverlay,r=>{X(r,V.value)}),E(()=>a.lang.rtl,()=>{$()}),E(()=>e.mini,()=>{e.noMiniAnimation||e.modelValue===!0&&(ge(),o.animate())}),E(k,r=>{i("miniState",r)});function $(r){r===void 0?fe(()=>{r=A.value===!0?0:V.value,$(ie.value*r)}):(o.isContainer.value===!0&&K.value===!0&&(s.value===!0||Math.abs(r)===V.value)&&(r+=ie.value*o.scrollbarWidth.value),me.value=r)}function le(r){G.value=r}function re(r){const M=r===!0?"remove":o.isContainer.value!==!0?"add":"";M!==""&&document.body.classList[M]("q-body--drawer-toggle")}function ge(){C!==null&&clearTimeout(C),l.proxy&&l.proxy.$el&&l.proxy.$el.classList.add("q-drawer--mini-animate"),be.value=!0,C=setTimeout(()=>{C=null,be.value=!1,l?.proxy?.$el?.classList.remove("q-drawer--mini-animate")},150)}function Oe(r){if(A.value!==!1)return;const M=V.value,ee=Ze(r.distance.x,0,M);if(r.isFinal===!0){ee>=Math.min(75,M)===!0?q():(o.animate(),le(0),$(ie.value*M)),ue.value=!1;return}$((a.lang.rtl===!0?K.value!==!0:K.value)?Math.max(M-ee,0):Math.min(0,ee-M)),le(Ze(ee/M,0,1)),r.isFirst===!0&&(ue.value=!0)}function we(r){if(A.value!==!0)return;const M=V.value,ee=r.direction===e.side,xe=(a.lang.rtl===!0?ee!==!0:ee)?Ze(r.distance.x,0,M):0;if(r.isFinal===!0){Math.abs(xe)<Math.min(75,M)===!0?(o.animate(),le(1),$(0)):F(),ue.value=!1;return}$(ie.value*xe),le(Ze(1-xe/M,0,1)),r.isFirst===!0&&(ue.value=!0)}function Ve(){y(!1),re(!0)}function te(r,M){o.update(e.side,r,M)}function oe(r,M){r.value!==M&&(r.value=M)}function X(r,M){te("size",r===!0?e.miniWidth:M)}return o.instances[e.side]=ce,X(e.miniToOverlay,V.value),te("space",ne.value),te("offset",Ce.value),e.showIfAbove===!0&&e.modelValue!==!0&&A.value===!0&&e["onUpdate:modelValue"]!==void 0&&i("update:modelValue",!0),Kt(()=>{i("onLayout",ne.value),i("miniState",k.value),w=e.showIfAbove===!0;const r=()=>{(A.value===!0?I:P)(!1,!0)};if(o.totalWidth.value!==0){fe(r);return}p=E(o.totalWidth,()=>{p(),p=void 0,A.value===!1&&e.showIfAbove===!0&&s.value===!1?q(!1):r()})}),Ke(()=>{p?.(),C!==null&&(clearTimeout(C),C=null),A.value===!0&&Ve(),o.instances[e.side]===ce&&(o.instances[e.side]=void 0,te("size",0),te("offset",0),te("space",!1))}),()=>{const r=[];s.value===!0&&(e.noSwipeOpen===!1&&r.push(_l(x("div",{key:"open",class:`q-drawer__opener fixed-${e.side}`,"aria-hidden":"true"}),z.value)),r.push(Ht("div",{ref:"backdrop",class:n.value,style:d.value,"aria-hidden":"true",onClick:F},void 0,"backdrop",e.noSwipeBackdrop!==!0&&A.value===!0,()=>de.value)));const M=k.value===!0&&u.mini!==void 0,ee=[x("div",{...h,key:""+M,class:[B.value,h.class]},M===!0?u.mini():bt(u.default))];return e.elevated===!0&&A.value===!0&&ee.push(x("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),r.push(Ht("aside",{ref:"content",class:N.value,style:L.value},ee,"contentclose",e.noSwipeClose!==!0&&s.value===!0,()=>Z.value)),x("div",{class:"q-drawer-container"},r)}}}),ba=Be({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:u,emit:i}){const{proxy:{$q:h}}=je(),l=yt(St,Se);if(l===Se)return console.error("QFooter needs to be child of QLayout"),Se;const a=T(parseInt(e.heightHint,10)),g=T(!0),y=T(Al.value===!0||l.isContainer.value===!0?0:window.innerHeight),m=c(()=>e.reveal===!0||l.view.value.indexOf("F")!==-1||h.platform.is.ios&&l.isContainer.value===!0),S=c(()=>l.isContainer.value===!0?l.containerHeight.value:y.value),o=c(()=>{if(e.modelValue!==!0)return 0;if(m.value===!0)return g.value===!0?a.value:0;const q=l.scroll.value.position+S.value+a.value-l.height.value;return q>0?q:0}),w=c(()=>e.modelValue!==!0||m.value===!0&&g.value!==!0),C=c(()=>e.modelValue===!0&&w.value===!0&&e.reveal===!0),p=c(()=>"q-footer q-layout__section--marginal "+(m.value===!0?"fixed":"absolute")+"-bottom"+(e.bordered===!0?" q-footer--bordered":"")+(w.value===!0?" q-footer--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus"+(m.value!==!0?" hidden":""):"")),s=c(()=>{const q=l.rows.value.bottom,F={};return q[0]==="l"&&l.left.space===!0&&(F[h.lang.rtl===!0?"right":"left"]=`${l.left.size}px`),q[2]==="r"&&l.right.space===!0&&(F[h.lang.rtl===!0?"left":"right"]=`${l.right.size}px`),F});function k(q,F){l.update("footer",q,F)}function V(q,F){q.value!==F&&(q.value=F)}function A({height:q}){V(a,q),k("size",q)}function b(){if(e.reveal!==!0)return;const{direction:q,position:F,inflectionPoint:ae}=l.scroll.value;V(g,q==="up"||F-ae<100||l.height.value-S.value-F-a.value<300)}function I(q){C.value===!0&&V(g,!0),i("focusin",q)}E(()=>e.modelValue,q=>{k("space",q),V(g,!0),l.animate()}),E(o,q=>{k("offset",q)}),E(()=>e.reveal,q=>{q===!1&&V(g,e.modelValue)}),E(g,q=>{l.animate(),i("reveal",q)}),E([a,l.scroll,l.height],b),E(()=>h.screen.height,q=>{l.isContainer.value!==!0&&V(y,q)});const P={};return l.instances.footer=P,e.modelValue===!0&&k("size",a.value),k("space",e.modelValue),k("offset",o.value),Ke(()=>{l.instances.footer===P&&(l.instances.footer=void 0,k("size",0),k("offset",0),k("space",!1))}),()=>{const q=Yt(u.default,[x(el,{debounce:0,onResize:A})]);return e.elevated===!0&&q.push(x("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),x("footer",{class:p.value,style:s.value,onFocusin:I},q)}}}),pa=Xt({__name:"EssentialLink",props:{title:{},caption:{},link:{},icon:{}},setup(e){const u=e,i=c(()=>typeof u.link=="string"&&u.link.startsWith("http"));return(h,l)=>(Me(),Ne(tt,{clickable:"",to:i.value?void 0:h.link,target:i.value?"_blank":void 0,tag:"a"},{default:j(()=>[h.icon?(Me(),Ne(gt,{key:0,avatar:""},{default:j(()=>[U(pt,{name:h.icon},null,8,["name"])]),_:1})):et("",!0),U(gt,null,{default:j(()=>[U(lt,null,{default:j(()=>[We(Ue(h.title),1)]),_:1}),U(lt,{caption:""},{default:j(()=>[We(Ue(h.caption),1)]),_:1})]),_:1})]),_:1},8,["to","target"]))}}),wa={class:"q-ml-sm"},Ca={key:0,class:"q-pa-xs"},$a=Xt({__name:"MainLayout",setup(e){const u=Zl(),i=aa(),h=i.isDebugMode,l=zl(),a=T(i.language),g=["en","ja"];E(a,s=>{i.setLanguage(s)}),E(()=>i.language,s=>{a.value=s});const y=[{title:"Images & Movies",caption:"",icon:"collections",link:{name:"home"}},{title:"Novels & Articles",caption:"",icon:"library_books",link:{path:`/novel-home/${i.language}`}},{title:"Your bookmarks",caption:"",icon:"bookmark",link:{name:"image-bookmarks"}},{title:"Upload and manage",caption:"upload or manage your images, videos and texts",icon:"upload",link:{name:"manage-creatives"}},{title:"Generate images",caption:"(to be developed) create novels and articles",icon:"edit",link:{name:"home"}},{title:"Generate texts",caption:"(to be developed) create images",icon:"edit",link:{name:"home"}},{title:"Your profile",caption:"",icon:"account_circle",link:{name:"user-profile"}},{title:"About",caption:"pirikapia, Utopia of beauties",icon:"info",link:""}],m=T(!1),S=T(""),o=T(null),w=T(!1);function C(){m.value=!m.value}async function p(){w.value=!0,o.value=null;try{const s=await ea.get("/");typeof s.data=="string"?S.value=s.data:s.data&&typeof s.data.message=="string"?S.value=s.data.message:(console.warn("Unexpected response format:",s.data),S.value="Welcome message received, but format is unexpected.")}catch(s){console.error("Failed to fetch welcome message:",s),ta.isAxiosError(s)&&(s.response?o.value=`Server Error: ${s.response.status} - ${s.response.data?.message||s.response.data||s.message}`:s.request?o.value="No response from server. Please check your network connection.":o.value=`Error: ${s.message}`),S.value=""}finally{w.value=!1}}return Kt(()=>{p().then().catch(s=>{console.log(s)}).finally(()=>{}),i.language=navigator.language?navigator.language:"ja",h&&console.debug("language set to",i.language),u.initializeAuthFromLocalStorage()}),(s,k)=>{const V=Tt("router-link"),A=Tt("router-view");return Me(),Ne(Nl,{view:"lHh Lpr lFf"},{default:j(()=>[U(ma,{flat:""},{default:j(()=>[U(va,null,{default:j(()=>[U(it,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:C}),U(ua,{style:{cursor:"pointer"}},{default:j(()=>[U(V,{to:"/",style:{"text-decoration":"none",color:"inherit"}},{default:j(()=>k[4]||(k[4]=[We(" Pirikapia ")])),_:1})]),_:1}),Ae(u).isAuthenticated?(Me(),Ne(tt,{key:0,clickable:"",onClick:k[0]||(k[0]=b=>Ae(l).push("/user-profile"))},{default:j(()=>[U(it,{flat:"",round:"",dense:"",icon:"account_circle"},{default:j(()=>[ct("span",wa,Ue(Ae(u).user.username),1)]),_:1})]),_:1})):et("",!0),U(fa,{dark:"",borderless:"",modelValue:a.value,"onUpdate:modelValue":k[1]||(k[1]=b=>a.value=b),options:g},{prepend:j(()=>[U(pt,{color:"white",name:"language"}),U(Tl,null,{default:j(()=>k[5]||(k[5]=[We("Language")])),_:1})]),_:1},8,["modelValue"]),Ae(u).isAuthenticated?et("",!0):(Me(),Ne(tt,{key:1,clickable:"",onClick:k[2]||(k[2]=b=>Ae(l).push("/user-login"))},{default:j(()=>[U(it,{flat:"",round:"",dense:"",icon:"login"},{default:j(()=>k[6]||(k[6]=[ct("span",{class:"q-ml-sm"},"Login",-1)])),_:1})]),_:1}))]),_:1})]),_:1}),U(Sa,{modelValue:m.value,"onUpdate:modelValue":k[3]||(k[3]=b=>m.value=b),"show-if-above":"",bordered:""},{default:j(()=>[U(Ul,null,{default:j(()=>[U(lt,{header:""},{default:j(()=>k[7]||(k[7]=[We(" Menus ")])),_:1}),(Me(),It(Ol,null,Ml(y,b=>U(pa,Bl({key:b.title,ref_for:!0},b),null,16)),64))]),_:1})]),_:1},8,["modelValue"]),U(Wl,null,{default:j(()=>[U(A)]),_:1}),U(ba,{class:"q-pa-xs"},{default:j(()=>[ct("span",null,Ue(S.value),1),Ae(h)?(Me(),It("span",Ca,"(debug mode) "+Ue(Ae(la)),1)):et("",!0)]),_:1})]),_:1})}}});export{$a as default};
