import{Q as N}from"./QPage-s9b0HobG.js";import{u as S,_ as y}from"./ImageBox.vue_vue_type_script_setup_true_lang-C6S0vjHK.js";import{a as g}from"./axios-DXJKcBBz.js";import{B as k,r as a,T as P,x as T,C as $,E as _,D as r,N as l,G as f,I as h,J as n,S as b,O as I,P as q,R as B}from"./index-EMGvw2OY.js";import{d as D}from"./interfaces-Cis-Z6rM.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-router-link-Yv6S3Zb9.js";import"./QBtn-BI7bDBvB.js";import"./QCardSection-BXxWNfpf.js";import"./use-dark-DRrNwo5F.js";import"./use-timeout-B2yegJJR.js";const R={class:"q-ma-md q-pa-md"},V={class:"text-body2"},L={class:"col-12 col-xl-8 q-ma-md q-pa-md bg-grey-2"},Q={class:"col-lg-2 col-md-3 col-sm-6"},U=k({__name:"NovelChapter",setup(j){const c=S(),t=P(),i=a(t.params.novelId!==void 0?t.params.novelId.toString():""),C=a(t.params.chapterStrId!==void 0?t.params.chapterStrId.toString():""),m=a(""),d=a(""),p=a([]),u=a({novelTitle:"",coverImage:"",novelChapters:[],description:"",novelId:0,ownerId:0,ownerUsername:""});async function w(){return await g.get(`/novels/${i.value}/${C.value}/${c.language}/`).then(e=>(d.value=e.data.cover_image,e.data.text.forEach(o=>{console.log(o),m.value=e.data.title,p.value.push(o)}),Promise.resolve())).catch(e=>(console.log(e),Promise.reject(new Error(e.message)))),Promise.resolve()}function x(){if(typeof t.params.novelId=="string"){const e=`/novels/${t.params.novelId}/${c.language}/`;g.get(e).then(o=>{const s=o.data;console.debug(s),u.value=D(s)}).catch(o=>{console.log(o)}).finally(()=>{})}else return}return T(()=>{w().then(()=>{x()}).catch(e=>{console.log(e)})}),(e,o)=>{const s=b("router-link");return r(),$(N,null,{default:_(()=>[l("div",R,[f(s,{to:`/novel-title/${i.value}`},{default:_(()=>[h(n(u.value.novelTitle),1)]),_:1},8,["to"]),o[0]||(o[0]=h(" > ")),l("span",V,n(m.value),1)]),l("div",L,[l("div",Q,[f(y,{imageId:d.value,enableLinkToImageDetailView:!1,showTags:!1,showPublishedDate:!1,showButtons:!1,cropAspectRatio:1},null,8,["imageId"])]),(r(!0),I(B,null,q(p.value,v=>(r(),I("div",{key:v,class:"col-12 q-px-md q-py-sm novel-scene"},n(v),1))),128))])]),_:1})}}}),Y=E(U,[["__scopeId","data-v-5ec68b03"]]);export{Y as default};
