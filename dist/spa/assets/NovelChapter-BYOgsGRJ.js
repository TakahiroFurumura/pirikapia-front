import{Q as S}from"./QPage-DCZRaFrD.js";import{u as x}from"./uiconfig-81KzlW-u.js";import{a as g}from"./auth-C-Bd6L6z.js";import{L as y,r as a,a0 as $,I as k,M as b,O as _,N as l,W as r,Q as f,R as h,S as n,$ as q,X as I,Y as P,_ as T}from"./index-Iejlj0YL.js";import{c as B}from"./interfaces-DarSW5Jb.js";import{_ as R}from"./ImageBox.vue_vue_type_script_setup_true_lang-BUQP3KA4.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-router-link-CL0TLQCd.js";import"./QBtn-C4amj06Z.js";import"./use-timeout-BxJrE4U8.js";import"./QCardSection-DQqK6sb_.js";import"./QChip-BKpr9KhP.js";import"./use-dark-CsNMFGTn.js";const D={class:"q-ma-md q-pa-md"},E={class:"text-body2"},L={class:"col-12 col-xl-8 q-ma-md q-pa-md bg-grey-2"},Q={class:"col-lg-2 col-md-3 col-sm-6"},M=y({__name:"NovelChapter",setup(U){const c=x(),t=$(),i=a(t.params.novelId!==void 0?t.params.novelId.toString():""),w=a(t.params.chapterStrId!==void 0?t.params.chapterStrId.toString():""),m=a(""),d=a(""),p=a([]),u=a({novelTitle:"",coverImage:"",novelChapters:[],description:"",novelId:0,ownerId:0,ownerUsername:""});async function C(){return await g.get(`/novels/${i.value}/${w.value}/${c.language}/`).then(e=>(d.value=e.data.cover_image,e.data.text.forEach(o=>{console.log(o),m.value=e.data.title,p.value.push(o)}),Promise.resolve())).catch(e=>(console.log(e),Promise.reject(new Error(e.message)))),Promise.resolve()}function N(){if(typeof t.params.novelId=="string"){const e=`/novels/${t.params.novelId}/${c.language}/`;g.get(e).then(o=>{const s=o.data;console.debug(s),u.value=B(s)}).catch(o=>{console.log(o)}).finally(()=>{})}else return}return k(()=>{C().then(()=>{N()}).catch(e=>{console.log(e)})}),(e,o)=>{const s=q("router-link");return l(),b(S,null,{default:_(()=>[r("div",D,[f(s,{to:`/novel-title/${i.value}`},{default:_(()=>[h(n(u.value.novelTitle),1)]),_:1},8,["to"]),o[0]||(o[0]=h(" > ")),r("span",E,n(m.value),1)]),r("div",L,[r("div",Q,[f(R,{imageId:d.value,enableLinkToImageDetailView:!1,showTags:!1,showPublishedDate:!1,showButtons:!1,cropAspectRatio:1},null,8,["imageId"])]),(l(!0),I(T,null,P(p.value,v=>(l(),I("div",{key:v,class:"col-12 q-px-md q-py-sm novel-scene"},n(v),1))),128))])]),_:1})}}}),ee=V(M,[["__scopeId","data-v-5ec68b03"]]);export{ee as default};
