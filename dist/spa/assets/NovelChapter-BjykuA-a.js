import{Q as S}from"./QPage-ltYmKs_4.js";import{u as x}from"./uiconfig-B05de8GS.js";import{a as g}from"./auth-CDSO7_SK.js";import{I as y,r as t,Y as k,F as P,J as T,L as f,K as n,T as r,N as _,O as h,P as c,Q as $,U as I,V as q,X as b}from"./index-7caSP31t.js";import{c as B}from"./interfaces-mmqTB_Cm.js";import{_ as V}from"./ImageBox.vue_vue_type_script_setup_true_lang-DqixTdiD.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-router-link-DHbFeyIZ.js";import"./QBtn-Cgmgakfy.js";import"./use-timeout-CyMzVV9z.js";import"./QCardSection-VDfp5xIU.js";import"./QChip-DYjRA0xl.js";import"./use-dark-B3FPmzRe.js";const E={class:"q-ma-md q-pa-md"},L={class:"text-body2"},Q={class:"col-12 col-xl-8 q-ma-md q-pa-md bg-grey-2"},R={class:"col-lg-2 col-md-3 col-sm-6"},U=y({__name:"NovelChapter",setup(F){const l=x(),a=k(),i=t(a.params.novelId!==void 0?a.params.novelId.toString():""),w=t(a.params.chapterStrId!==void 0?a.params.chapterStrId.toString():""),m=t(""),p=t(""),d=t([]),u=t({novelTitle:"",coverImage:"",novelChapters:[],description:"",novelId:0,ownerId:0,ownerUsername:""});async function C(){return await g.get(`/novels/${i.value}/${w.value}/${l.language}/`).then(e=>(p.value=e.data.cover_image,e.data.text.forEach(o=>{console.log(o),m.value=e.data.title,d.value.push(o)}),Promise.resolve())).catch(e=>(console.log(e),Promise.reject(new Error(e.message)))),Promise.resolve()}function N(){if(typeof a.params.novelId=="string"){const e=`/novels/${a.params.novelId}/${l.language}/`;g.get(e).then(o=>{const s=o.data;console.debug(s),u.value=B(s)}).catch(o=>{console.log(o)}).finally(()=>{})}else return}return P(()=>{a.params.language!==void 0&&(l.language=a.params.language.toString()),C().then(()=>{N()}).catch(e=>{console.log(e)})}),(e,o)=>{const s=$("router-link");return n(),T(S,null,{default:f(()=>[r("div",E,[_(s,{to:`/novel-title/${i.value}`},{default:f(()=>[h(c(u.value.novelTitle),1)]),_:1},8,["to"]),o[0]||(o[0]=h(" > ")),r("span",L,c(m.value),1)]),r("div",Q,[r("div",R,[_(V,{imageId:p.value,enableLinkToImageDetailView:!1,showTags:!1,showPublishedDate:!1,showButtons:!1,cropAspectRatio:1},null,8,["imageId"])]),(n(!0),I(b,null,q(d.value,v=>(n(),I("div",{key:v,class:"col-12 q-px-md q-py-sm novel-scene"},c(v),1))),128))])]),_:1})}}}),ee=D(U,[["__scopeId","data-v-fc8f7223"]]);export{ee as default};
