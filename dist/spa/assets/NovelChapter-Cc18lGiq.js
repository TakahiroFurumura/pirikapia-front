import{Q as N}from"./QPage-CcSyliM8.js";import{u as S,_ as y}from"./ImageBox.vue_vue_type_script_setup_true_lang-DB8OdnKW.js";import{a as g}from"./axios-B6YjhwR7.js";import{B as T,r as a,T as k,x as P,C as $,E as f,D as n,N as l,G as _,I as h,J as r,S as b,O as I,P as q,R as B}from"./index-Bq6dgnb6.js";import{d as D}from"./interfaces-aGxEP7vb.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-router-link-DQvo0l9p.js";import"./QBtn-5I6PZM-i.js";import"./QCardSection-D34gRZDi.js";import"./QCard-xFlhgNkg.js";import"./use-dark-BKWEFA6b.js";import"./use-timeout-BsUAoSfw.js";const R={class:"q-ma-md q-pa-md"},V={class:"text-body2"},L={class:"col-12 col-xl-8 q-ma-md q-pa-md bg-grey-2"},Q={class:"col-lg-2 col-md-3 col-sm-6"},j=T({__name:"NovelChapter",setup(A){const c=S(),t=k(),i=a(t.params.novelId!==void 0?t.params.novelId.toString():""),C=a(t.params.chapterStrId!==void 0?t.params.chapterStrId.toString():""),m=a(""),d=a(""),p=a([]),u=a({novelTitle:"",coverImage:"",novelChapters:[],description:"",novelId:0,ownerId:0});async function w(){return await g.get(`/novels/${i.value}/${C.value}/${c.language}/`).then(e=>(d.value=e.data.cover_image,e.data.text.forEach(o=>{console.log(o),m.value=e.data.title,p.value.push(o)}),Promise.resolve())).catch(e=>(console.log(e),Promise.reject(new Error(e.message)))),Promise.resolve()}function x(){if(typeof t.params.novelId=="string"){const e=`/novels/${t.params.novelId}/${c.language}/`;g.get(e).then(o=>{const s=o.data;console.debug(s),u.value=D(s)}).catch(o=>{console.log(o)}).finally(()=>{})}else return}return P(()=>{w().then(()=>{x()}).catch(e=>{console.log(e)})}),(e,o)=>{const s=b("router-link");return n(),$(N,null,{default:f(()=>[l("div",R,[_(s,{to:`/novel-title/${i.value}`},{default:f(()=>[h(r(u.value.novelTitle),1)]),_:1},8,["to"]),o[0]||(o[0]=h(" > ")),l("span",V,r(m.value),1)]),l("div",L,[l("div",Q,[_(y,{imageId:d.value,enableLinkToImageDetailView:!1,showTags:!1,showPublishedDate:!1,showButtons:!1,cropAspectRatio:1},null,8,["imageId"])]),(n(!0),I(B,null,q(p.value,v=>(n(),I("div",{key:v,class:"col-12 q-px-md q-py-sm novel-scene"},r(v),1))),128))])]),_:1})}}}),Z=E(j,[["__scopeId","data-v-fe4f072d"]]);export{Z as default};
