import{Q as N}from"./QPage-BxRQ--b1.js";import{u as x}from"./uiconfig-CbweBuhi.js";import{a as g}from"./auth-CiVWp3Bl.js";import{L as y,r as t,a0 as $,I as k,M as q,O as f,N as n,W as r,Q as _,R as h,S as c,$ as P,X as I,Y as T,_ as b}from"./index-C6CZfYqi.js";import{c as B}from"./interfaces-B4VYSTqA.js";import{_ as R}from"./ImageBox.vue_vue_type_script_setup_true_lang-CqwcvdOB.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-router-link-B0oSu7cF.js";import"./QBtn-D7UEd-7v.js";import"./use-timeout-D0nOoxWT.js";import"./QCardSection-CcE3Duat.js";import"./QChip-BZjThFgY.js";import"./use-dark-Cjj-YmHO.js";const D={class:"q-ma-md q-pa-md"},E={class:"text-body2"},L={class:"col-12 col-xl-8 q-ma-md q-pa-md bg-grey-2"},Q={class:"col-lg-2 col-md-3 col-sm-6"},M=y({__name:"NovelChapter",setup(U){const l=x(),a=$(),i=t(a.params.novelId!==void 0?a.params.novelId.toString():""),w=t(a.params.chapterStrId!==void 0?a.params.chapterStrId.toString():""),m=t(""),p=t(""),d=t([]),u=t({novelTitle:"",coverImage:"",novelChapters:[],description:"",novelId:0,ownerId:0,ownerUsername:""});async function C(){return await g.get(`/novels/${i.value}/${w.value}/${l.language}/`).then(e=>(p.value=e.data.cover_image,e.data.text.forEach(o=>{console.log(o),m.value=e.data.title,d.value.push(o)}),Promise.resolve())).catch(e=>(console.log(e),Promise.reject(new Error(e.message)))),Promise.resolve()}function S(){if(typeof a.params.novelId=="string"){const e=`/novels/${a.params.novelId}/${l.language}/`;g.get(e).then(o=>{const s=o.data;console.debug(s),u.value=B(s)}).catch(o=>{console.log(o)}).finally(()=>{})}else return}return k(()=>{a.params.language!==void 0&&(l.language=a.params.language.toString()),C().then(()=>{S()}).catch(e=>{console.log(e)})}),(e,o)=>{const s=P("router-link");return n(),q(N,null,{default:f(()=>[r("div",D,[_(s,{to:`/novel-title/${i.value}`},{default:f(()=>[h(c(u.value.novelTitle),1)]),_:1},8,["to"]),o[0]||(o[0]=h(" > ")),r("span",E,c(m.value),1)]),r("div",L,[r("div",Q,[_(R,{imageId:p.value,enableLinkToImageDetailView:!1,showTags:!1,showPublishedDate:!1,showButtons:!1,cropAspectRatio:1},null,8,["imageId"])]),(n(!0),I(b,null,T(d.value,v=>(n(),I("div",{key:v,class:"col-12 q-px-md q-py-sm novel-scene"},c(v),1))),128))])]),_:1})}}}),ee=V(M,[["__scopeId","data-v-fc8f7223"]]);export{ee as default};
