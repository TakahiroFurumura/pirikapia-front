import{u as z,e as H,a as K,h as W,Q as X}from"./use-router-link-B0oSu7cF.js";import{u as G,a as J}from"./use-dark-Cjj-YmHO.js";import{r as k,a as i,h as v,d as Y,a7 as p,s as A,c as Z,w as j,j as ee,i as te,a4 as ne,L as oe,I as le,a0 as ae,M as re,O as ue,N as S,X as se,P as ie,W as ce,Q as q,V as de}from"./index-C6CZfYqi.js";import{u as fe,b as me}from"./private.use-form-BNBdX3nU.js";import{Q as ve}from"./QPage-BxRQ--b1.js";import{u as ge,a as pe}from"./auth-CiVWp3Bl.js";import{u as he}from"./uiconfig-CbweBuhi.js";import{e as be}from"./extend-DTfK50KV.js";import{_ as ke}from"./NovelCover.vue_vue_type_script_setup_true_lang-CGlbUTlM.js";import{c as Ie}from"./interfaces-B4VYSTqA.js";import{_ as _e}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QSeparator-BoMccDor.js";import"./ImageBox.vue_vue_type_script_setup_true_lang-CqwcvdOB.js";import"./QBtn-D7UEd-7v.js";import"./QCardSection-CcE3Duat.js";import"./QChip-BZjThFgY.js";import"./use-timeout-D0nOoxWT.js";function Ce(t,n){const e=k(null),l=i(()=>t.disable===!0?null:v("span",{ref:e,class:"no-outline",tabindex:-1}));function o(a){const r=n.value;a?.qAvoidFocus!==!0&&(a?.type.indexOf("key")===0?document.activeElement!==r&&r?.contains(document.activeElement)===!0&&r.focus():e.value!==null&&(a===void 0||r?.contains(a.target)===!0)&&e.value.focus())}return{refocusTargetEl:l,refocusTarget:o}}const ye={xs:30,sm:35,md:40,lg:50,xl:60},Ve={...G,...z,...fe,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:t=>t==="tf"||t==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},we=["update:modelValue"];function Te(t,n){const{props:e,slots:l,emit:o,proxy:a}=Y(),{$q:r}=a,s=J(e,r),_=k(null),{refocusTargetEl:h,refocusTarget:C}=Ce(e,_),g=H(e,ye),c=i(()=>e.val!==void 0&&Array.isArray(e.modelValue)),f=i(()=>{const u=p(e.val);return c.value===!0?e.modelValue.findIndex(m=>p(m)===u):-1}),d=i(()=>c.value===!0?f.value!==-1:p(e.modelValue)===p(e.trueValue)),V=i(()=>c.value===!0?f.value===-1:p(e.modelValue)===p(e.falseValue)),T=i(()=>d.value===!1&&V.value===!1),M=i(()=>e.disable===!0?-1:e.tabindex||0),P=i(()=>`q-${t} cursor-pointer no-outline row inline no-wrap items-center`+(e.disable===!0?" disabled":"")+(s.value===!0?` q-${t}--dark`:"")+(e.dense===!0?` q-${t}--dense`:"")+(e.leftLabel===!0?" reverse":"")),N=i(()=>{const u=d.value===!0?"truthy":V.value===!0?"falsy":"indet",m=e.color!==void 0&&(e.keepColor===!0||d.value===!0)?` text-${e.color}`:"";return`q-${t}__inner relative-position non-selectable q-${t}__inner--${u}${m}`}),B=i(()=>{const u={type:"checkbox"};return e.name!==void 0&&Object.assign(u,{".checked":d.value,"^checked":d.value===!0?"checked":void 0,name:e.name,value:c.value===!0?e.val:e.trueValue}),u}),L=me(B),F=i(()=>{const u={tabindex:M.value,role:"switch","aria-label":e.label,"aria-checked":T.value===!0?"mixed":d.value===!0?"true":"false"};return e.disable===!0&&(u["aria-disabled"]="true"),u});function w(u){u!==void 0&&(A(u),C(u)),e.disable!==!0&&o("update:modelValue",Q(),u)}function Q(){if(c.value===!0){if(d.value===!0){const u=e.modelValue.slice();return u.splice(f.value,1),u}return e.modelValue.concat([e.val])}if(d.value===!0){if(e.toggleOrder!=="ft"||e.toggleIndeterminate===!1)return e.falseValue}else if(V.value===!0){if(e.toggleOrder==="ft"||e.toggleIndeterminate===!1)return e.trueValue}else return e.toggleOrder!=="ft"?e.trueValue:e.falseValue;return e.indeterminateValue}function R(u){(u.keyCode===13||u.keyCode===32)&&A(u)}function U(u){(u.keyCode===13||u.keyCode===32)&&w(u)}const D=n(d,T);return Object.assign(a,{toggle:w}),()=>{const u=D();e.disable!==!0&&L(u,"unshift",` q-${t}__native absolute q-ma-none q-pa-none`);const m=[v("div",{class:N.value,style:g.value,"aria-hidden":"true"},u)];h.value!==null&&m.push(h.value);const x=e.label!==void 0?K(l.default,[e.label]):W(l.default);return x!==void 0&&m.push(v("div",{class:`q-${t}__label q-anchor--skip`},x)),v("div",{ref:_,class:P.value,...F.value,onClick:w,onKeydown:R,onKeyup:U},m)}}const xe=Z({name:"QToggle",props:{...Ve,icon:String,iconColor:String},emits:we,setup(t){function n(e,l){const o=i(()=>(e.value===!0?t.checkedIcon:l.value===!0?t.indeterminateIcon:t.uncheckedIcon)||t.icon),a=i(()=>e.value===!0?t.iconColor:null);return()=>[v("div",{class:"q-toggle__track"}),v("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},o.value!==void 0?[v(X,{name:o.value,color:a.value})]:void 0)]}return Te("toggle",n)}});let y=null,E;const I=[];function Ae(t){t.title&&(t.title=t.titleTemplate?t.titleTemplate(t.title):t.title,delete t.titleTemplate),[["meta","content"],["link","href"]].forEach(n=>{const e=t[n[0]],l=n[1];for(const o in e){const a=e[o];a.template&&(Object.keys(a).length===1?delete e[o]:(a[l]=a.template(a[l]||""),delete a.template))}})}function Se(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!0;for(const e in t)if(t[e]!==n[e])return!0}function $(t){return["class","style"].includes(t)===!1}function O(t){return["lang","dir"].includes(t)===!1}function qe(t,n){const e={},l={};return t===void 0?{add:n,remove:l}:(t.title!==n.title&&(e.title=n.title),["meta","link","script","htmlAttr","bodyAttr"].forEach(o=>{const a=t[o],r=n[o];if(l[o]=[],a==null){e[o]=r;return}e[o]={};for(const s in a)r.hasOwnProperty(s)===!1&&l[o].push(s);for(const s in r)a.hasOwnProperty(s)===!1?e[o][s]=r[s]:Se(a[s],r[s])===!0&&(l[o].push(s),e[o][s]=r[s])}),{add:e,remove:l})}function Ee({add:t,remove:n}){t.title&&(document.title=t.title),Object.keys(n).length!==0&&(["meta","link","script"].forEach(e=>{n[e].forEach(l=>{document.head.querySelector(`${e}[data-qmeta="${l}"]`).remove()})}),n.htmlAttr.filter(O).forEach(e=>{document.documentElement.removeAttribute(e)}),n.bodyAttr.filter($).forEach(e=>{document.body.removeAttribute(e)})),["meta","link","script"].forEach(e=>{const l=t[e];for(const o in l){const a=document.createElement(e);for(const r in l[o])r!=="innerHTML"&&a.setAttribute(r,l[o][r]);a.setAttribute("data-qmeta",o),e==="script"&&(a.innerHTML=l[o].innerHTML||""),document.head.appendChild(a)}}),Object.keys(t.htmlAttr).filter(O).forEach(e=>{document.documentElement.setAttribute(e,t.htmlAttr[e]||"")}),Object.keys(t.bodyAttr).filter($).forEach(e=>{document.body.setAttribute(e,t.bodyAttr[e]||"")})}function $e(){y=null;const t={title:"",titleTemplate:null,meta:{},link:{},script:{},htmlAttr:{},bodyAttr:{}};for(let n=0;n<I.length;n++){const{active:e,val:l}=I[n];e===!0&&be(!0,t,l)}Ae(t),Ee(qe(E,t)),E=t}function b(){y!==null&&clearTimeout(y),y=setTimeout($e,50)}function Oe(t){{const n={active:!0};if(typeof t=="function"){const e=i(t);n.val=e.value,j(e,l=>{n.val=l,n.active===!0&&b()})}else n.val=t;I.push(n),b(),ee(()=>{n.active=!0,b()}),te(()=>{n.active=!1,b()}),ne(()=>{I.splice(I.indexOf(n),1),b()})}}const je={key:0,class:"q-ma-md"},Me={class:"col-12 q-ma-md bg-grey-2"},Pe=oe({__name:"NovelTitle",setup(t){const n=ge(),e=he(),l=e.isDebugMode,o=ae(),a=de(),r=k({novelTitle:"",coverImage:"",novelChapters:[],description:"",novelId:0,ownerId:0,ownerUsername:""}),s=k(!0),_=i(()=>n.isAuthenticated?n.user.username===r.value.ownerUsername:!1);j(()=>e.language,g=>{l&&console.debug(`language was changed to ${g}`),a.push({path:`/novel-title/${e.language}`}).then(()=>{C()}).catch(c=>{console.error(c)})});const h=k(!1);function C(){if(typeof o.params.novelId=="string"){const g=`/novels/${o.params.novelId}/${e.language}/`;s.value=!0,pe.get(g).then(c=>{const f=c.data;console.debug(f),r.value=Ie(f)}).catch(c=>{console.log(c)}).finally(()=>{s.value=!1,Oe({title:r.value.novelTitle})})}else return}return le(()=>{l&&console.debug(o.params.novelId),o.params.language!==void 0&&(e.language=o.params.language.toString()),C()}),(g,c)=>(S(),re(ve,{class:""},{default:ue(()=>[_.value?(S(),se("div",je,[q(xe,{modelValue:h.value,"onUpdate:modelValue":c[0]||(c[0]=f=>h.value=f),label:"owner view"},null,8,["modelValue"])])):ie("",!0),ce("div",Me,[q(ke,{novelTitle:r.value.novelTitle,coverImage:r.value.coverImage,novelChapters:r.value.novelChapters,description:r.value.description,novelId:r.value.novelId,"owner-id":r.value.ownerId,"owner-username":r.value.ownerUsername,imageLinksToImageDetail:!0},null,8,["novelTitle","coverImage","novelChapters","description","novelId","owner-id","owner-username"])])]),_:1}))}}),et=_e(Pe,[["__scopeId","data-v-ebce408a"]]);export{et as default};
