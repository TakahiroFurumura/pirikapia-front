import{u as R,e as z,c as H,h as K,Q as G}from"./use-router-link-Yv6S3Zb9.js";import{u as X,a as J}from"./use-dark-DRrNwo5F.js";import{r as b,a as i,h as v,g as W,a3 as g,s as A,c as Y,w as Z,a4 as ee,_ as te,X as ne,B as oe,x as le,T as ae,C as re,E as se,D as q,O as ue,F as ie,N as ce,G as S}from"./index-EMGvw2OY.js";import{u as de,a as fe}from"./private.use-form-DMg16YOp.js";import{Q as me}from"./QPage-s9b0HobG.js";import{u as ve,a as ge}from"./axios-DXJKcBBz.js";import{u as pe}from"./ImageBox.vue_vue_type_script_setup_true_lang-C6S0vjHK.js";import{e as he}from"./extend-DTfK50KV.js";import{_ as be}from"./NovelCover.vue_vue_type_script_setup_true_lang-BMW-b0Fu.js";import{d as ke}from"./interfaces-Cis-Z6rM.js";import{_ as Ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QBtn-BI7bDBvB.js";import"./QCardSection-BXxWNfpf.js";import"./QSeparator-DRlQFL7d.js";import"./use-timeout-B2yegJJR.js";function _e(t,o){const e=b(null),l=i(()=>t.disable===!0?null:v("span",{ref:e,class:"no-outline",tabindex:-1}));function a(n){const s=o.value;n?.qAvoidFocus!==!0&&(n?.type.indexOf("key")===0?document.activeElement!==s&&s?.contains(document.activeElement)===!0&&s.focus():e.value!==null&&(n===void 0||s?.contains(n.target)===!0)&&e.value.focus())}return{refocusTargetEl:l,refocusTarget:a}}const Ce={xs:30,sm:35,md:40,lg:50,xl:60},ye={...X,...R,...de,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:t=>t==="tf"||t==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},Te=["update:modelValue"];function xe(t,o){const{props:e,slots:l,emit:a,proxy:n}=W(),{$q:s}=n,u=J(e,s),p=b(null),{refocusTargetEl:I,refocusTarget:_}=_e(e,p),f=z(e,Ce),c=i(()=>e.val!==void 0&&Array.isArray(e.modelValue)),y=i(()=>{const r=g(e.val);return c.value===!0?e.modelValue.findIndex(m=>g(m)===r):-1}),d=i(()=>c.value===!0?y.value!==-1:g(e.modelValue)===g(e.trueValue)),T=i(()=>c.value===!0?y.value===-1:g(e.modelValue)===g(e.falseValue)),V=i(()=>d.value===!1&&T.value===!1),j=i(()=>e.disable===!0?-1:e.tabindex||0),B=i(()=>`q-${t} cursor-pointer no-outline row inline no-wrap items-center`+(e.disable===!0?" disabled":"")+(u.value===!0?` q-${t}--dark`:"")+(e.dense===!0?` q-${t}--dense`:"")+(e.leftLabel===!0?" reverse":"")),M=i(()=>{const r=d.value===!0?"truthy":T.value===!0?"falsy":"indet",m=e.color!==void 0&&(e.keepColor===!0||d.value===!0)?` text-${e.color}`:"";return`q-${t}__inner relative-position non-selectable q-${t}__inner--${r}${m}`}),N=i(()=>{const r={type:"checkbox"};return e.name!==void 0&&Object.assign(r,{".checked":d.value,"^checked":d.value===!0?"checked":void 0,name:e.name,value:c.value===!0?e.val:e.trueValue}),r}),P=fe(N),F=i(()=>{const r={tabindex:j.value,role:"switch","aria-label":e.label,"aria-checked":V.value===!0?"mixed":d.value===!0?"true":"false"};return e.disable===!0&&(r["aria-disabled"]="true"),r});function x(r){r!==void 0&&(A(r),_(r)),e.disable!==!0&&a("update:modelValue",L(),r)}function L(){if(c.value===!0){if(d.value===!0){const r=e.modelValue.slice();return r.splice(y.value,1),r}return e.modelValue.concat([e.val])}if(d.value===!0){if(e.toggleOrder!=="ft"||e.toggleIndeterminate===!1)return e.falseValue}else if(T.value===!0){if(e.toggleOrder==="ft"||e.toggleIndeterminate===!1)return e.trueValue}else return e.toggleOrder!=="ft"?e.trueValue:e.falseValue;return e.indeterminateValue}function D(r){(r.keyCode===13||r.keyCode===32)&&A(r)}function U(r){(r.keyCode===13||r.keyCode===32)&&x(r)}const Q=o(d,V);return Object.assign(n,{toggle:x}),()=>{const r=Q();e.disable!==!0&&P(r,"unshift",` q-${t}__native absolute q-ma-none q-pa-none`);const m=[v("div",{class:M.value,style:f.value,"aria-hidden":"true"},r)];I.value!==null&&m.push(I.value);const w=e.label!==void 0?H(l.default,[e.label]):K(l.default);return w!==void 0&&m.push(v("div",{class:`q-${t}__label q-anchor--skip`},w)),v("div",{ref:p,class:B.value,...F.value,onClick:x,onKeydown:D,onKeyup:U},m)}}const Ve=Y({name:"QToggle",props:{...ye,icon:String,iconColor:String},emits:Te,setup(t){function o(e,l){const a=i(()=>(e.value===!0?t.checkedIcon:l.value===!0?t.indeterminateIcon:t.uncheckedIcon)||t.icon),n=i(()=>e.value===!0?t.iconColor:null);return()=>[v("div",{class:"q-toggle__track"}),v("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},a.value!==void 0?[v(G,{name:a.value,color:n.value})]:void 0)]}return xe("toggle",o)}});let C=null,E;const k=[];function we(t){t.title&&(t.title=t.titleTemplate?t.titleTemplate(t.title):t.title,delete t.titleTemplate),[["meta","content"],["link","href"]].forEach(o=>{const e=t[o[0]],l=o[1];for(const a in e){const n=e[a];n.template&&(Object.keys(n).length===1?delete e[a]:(n[l]=n.template(n[l]||""),delete n.template))}})}function Ae(t,o){if(Object.keys(t).length!==Object.keys(o).length)return!0;for(const e in t)if(t[e]!==o[e])return!0}function O(t){return["class","style"].includes(t)===!1}function $(t){return["lang","dir"].includes(t)===!1}function qe(t,o){const e={},l={};return t===void 0?{add:o,remove:l}:(t.title!==o.title&&(e.title=o.title),["meta","link","script","htmlAttr","bodyAttr"].forEach(a=>{const n=t[a],s=o[a];if(l[a]=[],n==null){e[a]=s;return}e[a]={};for(const u in n)s.hasOwnProperty(u)===!1&&l[a].push(u);for(const u in s)n.hasOwnProperty(u)===!1?e[a][u]=s[u]:Ae(n[u],s[u])===!0&&(l[a].push(u),e[a][u]=s[u])}),{add:e,remove:l})}function Se({add:t,remove:o}){t.title&&(document.title=t.title),Object.keys(o).length!==0&&(["meta","link","script"].forEach(e=>{o[e].forEach(l=>{document.head.querySelector(`${e}[data-qmeta="${l}"]`).remove()})}),o.htmlAttr.filter($).forEach(e=>{document.documentElement.removeAttribute(e)}),o.bodyAttr.filter(O).forEach(e=>{document.body.removeAttribute(e)})),["meta","link","script"].forEach(e=>{const l=t[e];for(const a in l){const n=document.createElement(e);for(const s in l[a])s!=="innerHTML"&&n.setAttribute(s,l[a][s]);n.setAttribute("data-qmeta",a),e==="script"&&(n.innerHTML=l[a].innerHTML||""),document.head.appendChild(n)}}),Object.keys(t.htmlAttr).filter($).forEach(e=>{document.documentElement.setAttribute(e,t.htmlAttr[e]||"")}),Object.keys(t.bodyAttr).filter(O).forEach(e=>{document.body.setAttribute(e,t.bodyAttr[e]||"")})}function Ee(){C=null;const t={title:"",titleTemplate:null,meta:{},link:{},script:{},htmlAttr:{},bodyAttr:{}};for(let o=0;o<k.length;o++){const{active:e,val:l}=k[o];e===!0&&he(!0,t,l)}we(t),Se(qe(E,t)),E=t}function h(){C!==null&&clearTimeout(C),C=setTimeout(Ee,50)}function Oe(t){{const o={active:!0};if(typeof t=="function"){const e=i(t);o.val=e.value,Z(e,l=>{o.val=l,o.active===!0&&h()})}else o.val=t;k.push(o),h(),ee(()=>{o.active=!0,h()}),te(()=>{o.active=!1,h()}),ne(()=>{k.splice(k.indexOf(o),1),h()})}}const $e={key:0,class:"q-ma-md"},je={class:"col-12 q-ma-md bg-grey-2"},Be=oe({__name:"NovelTitle",setup(t){const o=ve(),e=pe(),l=e.isDebugMode,a=ae(),n=b({novelTitle:"",coverImage:"",novelChapters:[],description:"",novelId:0,ownerId:0,ownerUsername:""}),s=b(!0),u=i(()=>o.isAuthenticated?o.user.username===n.value.ownerUsername:!1),p=b(!1);function I(){if(typeof a.params.novelId=="string"){const _=`/novels/${a.params.novelId}/${e.language}/`;s.value=!0,ge.get(_).then(f=>{const c=f.data;console.debug(c),n.value=ke(c)}).catch(f=>{console.log(f)}).finally(()=>{s.value=!1,Oe({title:n.value.novelTitle})})}else return}return le(()=>{l&&console.debug(a.params.novelId),I()}),(_,f)=>(q(),re(me,{class:""},{default:se(()=>[u.value?(q(),ue("div",$e,[S(Ve,{modelValue:p.value,"onUpdate:modelValue":f[0]||(f[0]=c=>p.value=c),label:"owner view"},null,8,["modelValue"])])):ie("",!0),ce("div",je,[S(be,{novelTitle:n.value.novelTitle,coverImage:n.value.coverImage,novelChapters:n.value.novelChapters,description:n.value.description,novelId:n.value.novelId,"owner-id":n.value.ownerId,"owner-username":n.value.ownerUsername,imageLinksToImageDetail:!0},null,8,["novelTitle","coverImage","novelChapters","description","novelId","owner-id","owner-username"])])]),_:1}))}}),We=Ie(Be,[["__scopeId","data-v-240f2c45"]]);export{We as default};
