import{u as z,e as H,a as K,h as W,Q as X}from"./use-router-link-CE1KlCA8.js";import{u as G,a as J}from"./use-dark-BwWEZAs9.js";import{r as k,a as i,h as v,d as Y,a7 as p,s as A,c as Z,w as j,j as ee,i as te,a4 as ne,L as oe,I as le,a0 as ae,M as re,O as se,N as q,X as ue,P as ie,W as ce,Q as S,V as de}from"./index-BlcmDWqL.js";import{u as fe,b as me}from"./private.use-form-BghIlukX.js";import{Q as ve}from"./QPage-JZmyKtsz.js";import{u as ge,a as pe}from"./auth-AWVyl-b9.js";import{u as he}from"./uiconfig-cNolOjS7.js";import{e as be}from"./extend-DTfK50KV.js";import{_ as ke}from"./NovelCover.vue_vue_type_script_setup_true_lang-BHZay8tO.js";import{c as Ie}from"./interfaces-NKqa6kZM.js";import{_ as _e}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QSeparator-JXs4rqze.js";import"./ImageBox.vue_vue_type_script_setup_true_lang-H9UEqoU9.js";import"./QBtn-B6SnliEp.js";import"./QCardSection-DBhNDA19.js";import"./QChip-BGKqGv1R.js";import"./use-timeout-P8I7MvkH.js";function Ce(t,n){const e=k(null),o=i(()=>t.disable===!0?null:v("span",{ref:e,class:"no-outline",tabindex:-1}));function a(l){const r=n.value;l?.qAvoidFocus!==!0&&(l?.type.indexOf("key")===0?document.activeElement!==r&&r?.contains(document.activeElement)===!0&&r.focus():e.value!==null&&(l===void 0||r?.contains(l.target)===!0)&&e.value.focus())}return{refocusTargetEl:o,refocusTarget:a}}const ye={xs:30,sm:35,md:40,lg:50,xl:60},Ve={...G,...z,...fe,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:t=>t==="tf"||t==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},we=["update:modelValue"];function Te(t,n){const{props:e,slots:o,emit:a,proxy:l}=Y(),{$q:r}=l,u=J(e,r),_=k(null),{refocusTargetEl:h,refocusTarget:C}=Ce(e,_),g=H(e,ye),c=i(()=>e.val!==void 0&&Array.isArray(e.modelValue)),f=i(()=>{const s=p(e.val);return c.value===!0?e.modelValue.findIndex(m=>p(m)===s):-1}),d=i(()=>c.value===!0?f.value!==-1:p(e.modelValue)===p(e.trueValue)),V=i(()=>c.value===!0?f.value===-1:p(e.modelValue)===p(e.falseValue)),T=i(()=>d.value===!1&&V.value===!1),M=i(()=>e.disable===!0?-1:e.tabindex||0),P=i(()=>`q-${t} cursor-pointer no-outline row inline no-wrap items-center`+(e.disable===!0?" disabled":"")+(u.value===!0?` q-${t}--dark`:"")+(e.dense===!0?` q-${t}--dense`:"")+(e.leftLabel===!0?" reverse":"")),N=i(()=>{const s=d.value===!0?"truthy":V.value===!0?"falsy":"indet",m=e.color!==void 0&&(e.keepColor===!0||d.value===!0)?` text-${e.color}`:"";return`q-${t}__inner relative-position non-selectable q-${t}__inner--${s}${m}`}),B=i(()=>{const s={type:"checkbox"};return e.name!==void 0&&Object.assign(s,{".checked":d.value,"^checked":d.value===!0?"checked":void 0,name:e.name,value:c.value===!0?e.val:e.trueValue}),s}),L=me(B),F=i(()=>{const s={tabindex:M.value,role:"switch","aria-label":e.label,"aria-checked":T.value===!0?"mixed":d.value===!0?"true":"false"};return e.disable===!0&&(s["aria-disabled"]="true"),s});function w(s){s!==void 0&&(A(s),C(s)),e.disable!==!0&&a("update:modelValue",Q(),s)}function Q(){if(c.value===!0){if(d.value===!0){const s=e.modelValue.slice();return s.splice(f.value,1),s}return e.modelValue.concat([e.val])}if(d.value===!0){if(e.toggleOrder!=="ft"||e.toggleIndeterminate===!1)return e.falseValue}else if(V.value===!0){if(e.toggleOrder==="ft"||e.toggleIndeterminate===!1)return e.trueValue}else return e.toggleOrder!=="ft"?e.trueValue:e.falseValue;return e.indeterminateValue}function R(s){(s.keyCode===13||s.keyCode===32)&&A(s)}function U(s){(s.keyCode===13||s.keyCode===32)&&w(s)}const D=n(d,T);return Object.assign(l,{toggle:w}),()=>{const s=D();e.disable!==!0&&L(s,"unshift",` q-${t}__native absolute q-ma-none q-pa-none`);const m=[v("div",{class:N.value,style:g.value,"aria-hidden":"true"},s)];h.value!==null&&m.push(h.value);const x=e.label!==void 0?K(o.default,[e.label]):W(o.default);return x!==void 0&&m.push(v("div",{class:`q-${t}__label q-anchor--skip`},x)),v("div",{ref:_,class:P.value,...F.value,onClick:w,onKeydown:R,onKeyup:U},m)}}const xe=Z({name:"QToggle",props:{...Ve,icon:String,iconColor:String},emits:we,setup(t){function n(e,o){const a=i(()=>(e.value===!0?t.checkedIcon:o.value===!0?t.indeterminateIcon:t.uncheckedIcon)||t.icon),l=i(()=>e.value===!0?t.iconColor:null);return()=>[v("div",{class:"q-toggle__track"}),v("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},a.value!==void 0?[v(X,{name:a.value,color:l.value})]:void 0)]}return Te("toggle",n)}});let y=null,E;const I=[];function Ae(t){t.title&&(t.title=t.titleTemplate?t.titleTemplate(t.title):t.title,delete t.titleTemplate),[["meta","content"],["link","href"]].forEach(n=>{const e=t[n[0]],o=n[1];for(const a in e){const l=e[a];l.template&&(Object.keys(l).length===1?delete e[a]:(l[o]=l.template(l[o]||""),delete l.template))}})}function qe(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!0;for(const e in t)if(t[e]!==n[e])return!0}function $(t){return["class","style"].includes(t)===!1}function O(t){return["lang","dir"].includes(t)===!1}function Se(t,n){const e={},o={};return t===void 0?{add:n,remove:o}:(t.title!==n.title&&(e.title=n.title),["meta","link","script","htmlAttr","bodyAttr"].forEach(a=>{const l=t[a],r=n[a];if(o[a]=[],l==null){e[a]=r;return}e[a]={};for(const u in l)r.hasOwnProperty(u)===!1&&o[a].push(u);for(const u in r)l.hasOwnProperty(u)===!1?e[a][u]=r[u]:qe(l[u],r[u])===!0&&(o[a].push(u),e[a][u]=r[u])}),{add:e,remove:o})}function Ee({add:t,remove:n}){t.title&&(document.title=t.title),Object.keys(n).length!==0&&(["meta","link","script"].forEach(e=>{n[e].forEach(o=>{document.head.querySelector(`${e}[data-qmeta="${o}"]`).remove()})}),n.htmlAttr.filter(O).forEach(e=>{document.documentElement.removeAttribute(e)}),n.bodyAttr.filter($).forEach(e=>{document.body.removeAttribute(e)})),["meta","link","script"].forEach(e=>{const o=t[e];for(const a in o){const l=document.createElement(e);for(const r in o[a])r!=="innerHTML"&&l.setAttribute(r,o[a][r]);l.setAttribute("data-qmeta",a),e==="script"&&(l.innerHTML=o[a].innerHTML||""),document.head.appendChild(l)}}),Object.keys(t.htmlAttr).filter(O).forEach(e=>{document.documentElement.setAttribute(e,t.htmlAttr[e]||"")}),Object.keys(t.bodyAttr).filter($).forEach(e=>{document.body.setAttribute(e,t.bodyAttr[e]||"")})}function $e(){y=null;const t={title:"",titleTemplate:null,meta:{},link:{},script:{},htmlAttr:{},bodyAttr:{}};for(let n=0;n<I.length;n++){const{active:e,val:o}=I[n];e===!0&&be(!0,t,o)}Ae(t),Ee(Se(E,t)),E=t}function b(){y!==null&&clearTimeout(y),y=setTimeout($e,50)}function Oe(t){{const n={active:!0};if(typeof t=="function"){const e=i(t);n.val=e.value,j(e,o=>{n.val=o,n.active===!0&&b()})}else n.val=t;I.push(n),b(),ee(()=>{n.active=!0,b()}),te(()=>{n.active=!1,b()}),ne(()=>{I.splice(I.indexOf(n),1),b()})}}const je={key:0,class:"q-ma-md"},Me={class:"col-12 q-ma-md bg-grey-2"},Pe=oe({__name:"NovelTitle",setup(t){const n=ge(),e=he(),o=e.isDebugMode,a=ae(),l=de(),r=k({novelTitle:"",coverImage:"",novelChapters:[],description:"",novelId:0,ownerId:0,ownerUsername:""}),u=k(!0),_=i(()=>n.isAuthenticated?n.user.username===r.value.ownerUsername:!1);j(()=>e.language,g=>{o&&console.debug(`language was changed to ${g}`),l.push({path:`/novel-title/${e.language}`}).then(()=>{C()}).catch(c=>{console.error(c)})});const h=k(!1);function C(){if(typeof a.params.novelId=="string"){const g=`/novels/${a.params.novelId}/${e.language}/`;u.value=!0,pe.get(g).then(c=>{const f=c.data;console.debug(f),r.value=Ie(f)}).catch(c=>{console.log(c)}).finally(()=>{u.value=!1,Oe({title:r.value.novelTitle})})}else return}return le(()=>{o&&console.debug(a.params.novelId),C()}),(g,c)=>(q(),re(ve,{class:""},{default:se(()=>[_.value?(q(),ue("div",je,[S(xe,{modelValue:h.value,"onUpdate:modelValue":c[0]||(c[0]=f=>h.value=f),label:"owner view"},null,8,["modelValue"])])):ie("",!0),ce("div",Me,[S(ke,{novelTitle:r.value.novelTitle,coverImage:r.value.coverImage,novelChapters:r.value.novelChapters,description:r.value.description,novelId:r.value.novelId,"owner-id":r.value.ownerId,"owner-username":r.value.ownerUsername,imageLinksToImageDetail:!0},null,8,["novelTitle","coverImage","novelChapters","description","novelId","owner-id","owner-username"])])]),_:1}))}}),et=_e(Pe,[["__scopeId","data-v-2a092bb4"]]);export{et as default};
