import{v as H,g as b,e as N}from"./use-router-link-B_O56vdA.js";import{g as Q,w as F,F as U,n as w,a7 as T,r as M,a3 as G,a8 as I,h as y,c as K,a9 as L,a as D,b as O,f as j,t as B,A}from"./index-DIZdvslo.js";import{r as q,l as W}from"./use-key-composition-ClTwYej7.js";const ie={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},se=["beforeShow","show","beforeHide","hide"];function ue({showing:e,canShow:t,hideOnRouteChange:o,handleShow:a,handleHide:i,processOnMount:c}){const r=Q(),{props:l,emit:s,proxy:h}=r;let u;function v(n){e.value===!0?$(n):g(n)}function g(n){if(l.disable===!0||n?.qAnchorHandled===!0||t!==void 0&&t(n)!==!0)return;const p=l["onUpdate:modelValue"]!==void 0;p===!0&&(s("update:modelValue",!0),u=n,w(()=>{u===n&&(u=void 0)})),(l.modelValue===null||p===!1)&&C(n)}function C(n){e.value!==!0&&(e.value=!0,s("beforeShow",n),a!==void 0?a(n):s("show",n))}function $(n){if(l.disable===!0)return;const p=l["onUpdate:modelValue"]!==void 0;p===!0&&(s("update:modelValue",!1),u=n,w(()=>{u===n&&(u=void 0)})),(l.modelValue===null||p===!1)&&E(n)}function E(n){e.value!==!1&&(e.value=!1,s("beforeHide",n),i!==void 0?i(n):s("hide",n))}function V(n){l.disable===!0&&n===!0?l["onUpdate:modelValue"]!==void 0&&s("update:modelValue",!1):n===!0!==e.value&&(n===!0?C:E)(u)}F(()=>l.modelValue,V),o!==void 0&&H(r)===!0&&F(()=>h.$route.fullPath,()=>{o.value===!0&&e.value===!0&&$()}),c===!0&&U(()=>{V(l.modelValue)});const k={show:g,hide:$,toggle:v};return Object.assign(h,k),k}let z=1,J=document.body;function R(e,t){const o=document.createElement("div");if(o.id=t!==void 0?`q-portal--${t}--${z++}`:e,T.globalNodes!==void 0){const a=T.globalNodes.class;a!==void 0&&(o.className=a)}return J.appendChild(o),o}function X(e){e.remove()}const P=[];function re(e){return P.find(t=>t.contentEl!==null&&t.contentEl.contains(e))}function Y(e,t){do{if(e.$options.name==="QMenu"){if(e.hide(t),e.$props.separateClosePopup===!0)return b(e)}else if(e.__qPortal===!0){const o=b(e);return o?.$options.name==="QPopupProxy"?(e.hide(t),o):e}e=b(e)}while(e!=null)}function fe(e,t,o){for(;o!==0&&e!==void 0&&e!==null;){if(e.__qPortal===!0){if(o--,e.$options.name==="QMenu"){e=Y(e,t);continue}e.hide(t)}e=b(e)}}const Z=K({name:"QPortal",setup(e,{slots:t}){return()=>t.default()}});function x(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function de(e,t,o,a){const i=M(!1),c=M(!1);let r=null;const l={},s=a==="dialog"&&x(e);function h(v){if(v===!0){q(l),c.value=!0;return}c.value=!1,i.value===!1&&(s===!1&&r===null&&(r=R(!1,a)),i.value=!0,P.push(e.proxy),W(l))}function u(v){if(c.value=!1,v!==!0)return;q(l),i.value=!1;const g=P.indexOf(e.proxy);g!==-1&&P.splice(g,1),r!==null&&(X(r),r=null)}return G(()=>{u(!0)}),e.proxy.__qPortal=!0,I(e.proxy,"contentEl",()=>t.value),{showPortal:h,hidePortal:u,portalIsActive:i,portalIsAccessible:c,renderPortal:()=>s===!0?o():i.value===!0?[y(L,{to:r},y(Z,o))]:void 0}}const ce={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function pe(e,t=()=>{},o=()=>{}){return{transitionProps:D(()=>{const a=`q-transition--${e.transitionShow||t()}`,i=`q-transition--${e.transitionHide||o()}`;return{appear:!0,enterFromClass:`${a}-enter-from`,enterActiveClass:`${a}-enter-active`,enterToClass:`${a}-enter-to`,leaveFromClass:`${i}-leave-from`,leaveActiveClass:`${i}-leave-active`,leaveToClass:`${i}-leave-to`}}),transitionStyle:D(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}function me(){let e;const t=Q();function o(){e=void 0}return O(o),j(o),{removeTick:o,registerTick(a){e=a,w(()=>{e===a&&(N(t)===!1&&e(),e=void 0)})}}}const f=[];let m;function ee(e){m=e.keyCode===27}function te(){m===!0&&(m=!1)}function ne(e){m===!0&&(m=!1,B(e,27)===!0&&f[f.length-1](e))}function S(e){window[e]("keydown",ee),window[e]("blur",te),window[e]("keyup",ne),m=!1}function ve(e){A.is.desktop===!0&&(f.push(e),f.length===1&&S("addEventListener"))}function ge(e){const t=f.indexOf(e);t!==-1&&(f.splice(t,1),f.length===0&&S("removeEventListener"))}const d=[];function _(e){d[d.length-1](e)}function he(e){A.is.desktop===!0&&(d.push(e),d.length===1&&document.body.addEventListener("focusin",_))}function be(e){const t=d.indexOf(e);t!==-1&&(d.splice(t,1),d.length===0&&document.body.removeEventListener("focusin",_))}export{ie as a,ue as b,ce as c,me as d,pe as e,de as f,he as g,ge as h,Y as i,ve as j,re as k,fe as l,P as p,be as r,se as u};
